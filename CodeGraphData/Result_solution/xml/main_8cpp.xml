<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.6">
  <compounddef id="main_8cpp" kind="file">
    <compoundname>main.cpp</compoundname>
    <includes local="no">iostream</includes>
    <includes local="no">ctime</includes>
    <includes refid="post_process_8h" local="yes">postProcess.h</includes>
    <includes refid="_g_a_8h" local="yes">GA.h</includes>
    <includes refid="_n_c_r_f_8h" local="yes">NCRF.h</includes>
    <includes refid="bend_gabar_8h" local="yes">bendGabar.h</includes>
    <includes refid="circle_filter_8h" local="yes">circleFilter.h</includes>
    <incdepgraph>
      <node id="445">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/util_inl.hpp</label>
      </node>
      <node id="397">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/logger.h</label>
      </node>
      <node id="324">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xlocale</label>
      </node>
      <node id="296">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/initializer_list</label>
      </node>
      <node id="447">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/deque</label>
      </node>
      <node id="444">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/list</label>
      </node>
      <node id="334">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/errno.h</label>
      </node>
      <node id="266">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/cvdef.h</label>
      </node>
      <node id="429">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/shape.hpp</label>
      </node>
      <node id="387">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/set</label>
      </node>
      <node id="428">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/photo/photo_c.h</label>
      </node>
      <node id="426">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/objdetect/objdetect_c.h</label>
      </node>
      <node id="292">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/corecrt.h</label>
      </node>
      <node id="337">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/neon_utils.hpp</label>
      </node>
      <node id="370">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/dnn/dict.hpp</label>
      </node>
      <node id="331">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xfacet</label>
      </node>
      <node id="414">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/highgui.hpp</label>
      </node>
      <node id="309">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cstring</label>
      </node>
      <node id="452">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/superres.hpp</label>
      </node>
      <node id="306">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/iosfwd</label>
      </node>
      <node id="364">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/defines.h</label>
      </node>
      <node id="441">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/matchers.hpp</label>
      </node>
      <node id="340">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/traits.hpp</label>
      </node>
      <node id="423">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/ml.hpp</label>
      </node>
      <node id="305">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/utility</label>
      </node>
      <node id="349">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/persistence.hpp</label>
      </node>
      <node id="338">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/vsx_utils.hpp</label>
      </node>
      <node id="264">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/opencv_modules.hpp</label>
      </node>
      <node id="333">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cerrno</label>
      </node>
      <node id="455">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/video/tracking.hpp</label>
      </node>
      <node id="381">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/params.h</label>
      </node>
      <node id="419">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/imgproc/types_c.h</label>
      </node>
      <node id="469">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/fast_marching.hpp</label>
      </node>
      <node id="457">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/video/tracking_c.h</label>
      </node>
      <node id="254">
        <label>C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp</label>
        <link refid="main.cpp"/>
        <childnode refid="255" relation="include">
        </childnode>
        <childnode refid="256" relation="include">
        </childnode>
        <childnode refid="257" relation="include">
        </childnode>
        <childnode refid="260" relation="include">
        </childnode>
        <childnode refid="262" relation="include">
        </childnode>
        <childnode refid="263" relation="include">
        </childnode>
        <childnode refid="474" relation="include">
        </childnode>
      </node>
      <node id="286">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/float.h</label>
      </node>
      <node id="278">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xmemory</label>
      </node>
      <node id="332">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/system_error</label>
      </node>
      <node id="267">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/limits.h</label>
      </node>
      <node id="269">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/stddef.h</label>
      </node>
      <node id="405">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xlocmon</label>
      </node>
      <node id="353">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/ccomplex</label>
      </node>
      <node id="321">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xlocnum</label>
      </node>
      <node id="407">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/ctime</label>
      </node>
      <node id="357">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/core_c.h</label>
      </node>
      <node id="412">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/timer.h</label>
      </node>
      <node id="422">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/imgproc.hpp</label>
      </node>
      <node id="318">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/istream</label>
      </node>
      <node id="375">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/dnn/dnn.inl.hpp</label>
      </node>
      <node id="275">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/climits</label>
      </node>
      <node id="411">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/index_testing.h</label>
      </node>
      <node id="258">
        <label>opencv2/opencv.hpp</label>
      </node>
      <node id="453">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/superres/optical_flow.hpp</label>
      </node>
      <node id="261">
        <label>string</label>
      </node>
      <node id="424">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/objdetect.hpp</label>
      </node>
      <node id="339">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/assert.h</label>
      </node>
      <node id="395">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/kdtree_single_index.h</label>
      </node>
      <node id="307">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cstdio</label>
      </node>
      <node id="373">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xtree</label>
      </node>
      <node id="376">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann.hpp</label>
      </node>
      <node id="421">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videoio/videoio_c.h</label>
      </node>
      <node id="271">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/stdint.h</label>
      </node>
      <node id="410">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/ground_truth.h</label>
      </node>
      <node id="388">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/all_indices.h</label>
      </node>
      <node id="327">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/typeinfo</label>
      </node>
      <node id="347">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/bufferpool.hpp</label>
      </node>
      <node id="390">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/dynamic_bitset.h</label>
      </node>
      <node id="311">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/crtdbg.h</label>
      </node>
      <node id="317">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/string</label>
      </node>
      <node id="462">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/optical_flow.hpp</label>
      </node>
      <node id="377">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/flann_base.hpp</label>
      </node>
      <node id="268">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/hal/interface.h</label>
      </node>
      <node id="431">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/shape/shape_transformer.hpp</label>
      </node>
      <node id="400">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/linear_index.h</label>
      </node>
      <node id="355">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xcomplex</label>
      </node>
      <node id="363">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/miniflann.hpp</label>
      </node>
      <node id="257">
        <label>postProcess.h</label>
        <link refid="post_process_8h"/>
        <childnode refid="258" relation="include">
        </childnode>
        <childnode refid="259" relation="include">
        </childnode>
      </node>
      <node id="385">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/nn_index.h</label>
      </node>
      <node id="396">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/kmeans_index.h</label>
      </node>
      <node id="458">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab.hpp</label>
      </node>
      <node id="472">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/wobble_suppression.hpp</label>
      </node>
      <node id="302">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/vcruntime_exception.h</label>
      </node>
      <node id="312">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xatomic0.h</label>
      </node>
      <node id="378">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cassert</label>
      </node>
      <node id="262">
        <label>NCRF.h</label>
        <link refid="_n_c_r_f_8h"/>
        <childnode refid="259" relation="include">
        </childnode>
        <childnode refid="258" relation="include">
        </childnode>
      </node>
      <node id="471">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/deblurring.hpp</label>
      </node>
      <node id="345">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/vector</label>
      </node>
      <node id="344">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/types.hpp</label>
      </node>
      <node id="301">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/malloc.h</label>
      </node>
      <node id="289">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xtgmath.h</label>
      </node>
      <node id="454">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/video.hpp</label>
      </node>
      <node id="343">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/fast_math.hpp</label>
      </node>
      <node id="383">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/iostream</label>
      </node>
      <node id="272">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/cv_cpu_dispatch.h</label>
      </node>
      <node id="368">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/dnn.hpp</label>
      </node>
      <node id="384">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/saving.h</label>
      </node>
      <node id="417">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/highgui/highgui_c.h</label>
      </node>
      <node id="448">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/camera.hpp</label>
      </node>
      <node id="433">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/shape/shape_distance.hpp</label>
      </node>
      <node id="348">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/mat.inl.hpp</label>
      </node>
      <node id="288">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/math.h</label>
      </node>
      <node id="427">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/photo.hpp</label>
      </node>
      <node id="466">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/frame_source.hpp</label>
      </node>
      <node id="468">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/inpainting.hpp</label>
      </node>
      <node id="358">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/types_c.h</label>
      </node>
      <node id="351">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/cvstd.inl.hpp</label>
      </node>
      <node id="315">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cctype</label>
      </node>
      <node id="256">
        <label>ctime</label>
      </node>
      <node id="380">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/matrix.h</label>
      </node>
      <node id="461">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/fstream</label>
      </node>
      <node id="299">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/exception</label>
      </node>
      <node id="293">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/sys/types.h</label>
      </node>
      <node id="279">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xmemory0</label>
      </node>
      <node id="322">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/streambuf</label>
      </node>
      <node id="285">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cfloat</label>
      </node>
      <node id="284">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/ymath.h</label>
      </node>
      <node id="356">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/utility.hpp</label>
      </node>
      <node id="259">
        <label>vector</label>
      </node>
      <node id="435">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/warpers.hpp</label>
      </node>
      <node id="360">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/ovx.hpp</label>
      </node>
      <node id="316">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/ctype.h</label>
      </node>
      <node id="446">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/queue</label>
      </node>
      <node id="398">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/stdarg.h</label>
      </node>
      <node id="430">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/shape/emdL1.hpp</label>
      </node>
      <node id="273">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/version.hpp</label>
      </node>
      <node id="451">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/blenders.hpp</label>
      </node>
      <node id="449">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/exposure_compensate.hpp</label>
      </node>
      <node id="409">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/autotuned_index.h</label>
      </node>
      <node id="263">
        <label>bendGabar.h</label>
        <link refid="bend_gabar_8h"/>
        <childnode refid="258" relation="include">
        </childnode>
        <childnode refid="264" relation="include">
        </childnode>
        <childnode refid="265" relation="include">
        </childnode>
        <childnode refid="266" relation="include">
        </childnode>
        <childnode refid="267" relation="include">
        </childnode>
        <childnode refid="268" relation="include">
        </childnode>
        <childnode refid="269" relation="include">
        </childnode>
        <childnode refid="270" relation="include">
        </childnode>
        <childnode refid="271" relation="include">
        </childnode>
        <childnode refid="272" relation="include">
        </childnode>
        <childnode refid="273" relation="include">
        </childnode>
        <childnode refid="274" relation="include">
        </childnode>
        <childnode refid="275" relation="include">
        </childnode>
        <childnode refid="276" relation="include">
        </childnode>
        <childnode refid="277" relation="include">
        </childnode>
        <childnode refid="278" relation="include">
        </childnode>
        <childnode refid="279" relation="include">
        </childnode>
        <childnode refid="280" relation="include">
        </childnode>
        <childnode refid="281" relation="include">
        </childnode>
        <childnode refid="282" relation="include">
        </childnode>
        <childnode refid="283" relation="include">
        </childnode>
        <childnode refid="284" relation="include">
        </childnode>
        <childnode refid="285" relation="include">
        </childnode>
        <childnode refid="286" relation="include">
        </childnode>
        <childnode refid="287" relation="include">
        </childnode>
        <childnode refid="288" relation="include">
        </childnode>
        <childnode refid="289" relation="include">
        </childnode>
        <childnode refid="290" relation="include">
        </childnode>
        <childnode refid="291" relation="include">
        </childnode>
        <childnode refid="292" relation="include">
        </childnode>
        <childnode refid="293" relation="include">
        </childnode>
        <childnode refid="294" relation="include">
        </childnode>
        <childnode refid="295" relation="include">
        </childnode>
        <childnode refid="296" relation="include">
        </childnode>
        <childnode refid="297" relation="include">
        </childnode>
        <childnode refid="298" relation="include">
        </childnode>
        <childnode refid="299" relation="include">
        </childnode>
        <childnode refid="300" relation="include">
        </childnode>
        <childnode refid="301" relation="include">
        </childnode>
        <childnode refid="302" relation="include">
        </childnode>
        <childnode refid="303" relation="include">
        </childnode>
        <childnode refid="304" relation="include">
        </childnode>
        <childnode refid="305" relation="include">
        </childnode>
        <childnode refid="306" relation="include">
        </childnode>
        <childnode refid="307" relation="include">
        </childnode>
        <childnode refid="308" relation="include">
        </childnode>
        <childnode refid="309" relation="include">
        </childnode>
        <childnode refid="310" relation="include">
        </childnode>
        <childnode refid="311" relation="include">
        </childnode>
        <childnode refid="312" relation="include">
        </childnode>
        <childnode refid="313" relation="include">
        </childnode>
        <childnode refid="314" relation="include">
        </childnode>
        <childnode refid="315" relation="include">
        </childnode>
        <childnode refid="316" relation="include">
        </childnode>
        <childnode refid="317" relation="include">
        </childnode>
        <childnode refid="318" relation="include">
        </childnode>
        <childnode refid="319" relation="include">
        </childnode>
        <childnode refid="320" relation="include">
        </childnode>
        <childnode refid="321" relation="include">
        </childnode>
        <childnode refid="322" relation="include">
        </childnode>
        <childnode refid="323" relation="include">
        </childnode>
        <childnode refid="324" relation="include">
        </childnode>
        <childnode refid="325" relation="include">
        </childnode>
        <childnode refid="326" relation="include">
        </childnode>
        <childnode refid="327" relation="include">
        </childnode>
        <childnode refid="328" relation="include">
        </childnode>
        <childnode refid="329" relation="include">
        </childnode>
        <childnode refid="330" relation="include">
        </childnode>
        <childnode refid="331" relation="include">
        </childnode>
        <childnode refid="332" relation="include">
        </childnode>
        <childnode refid="333" relation="include">
        </childnode>
        <childnode refid="334" relation="include">
        </childnode>
        <childnode refid="335" relation="include">
        </childnode>
        <childnode refid="336" relation="include">
        </childnode>
        <childnode refid="337" relation="include">
        </childnode>
        <childnode refid="338" relation="include">
        </childnode>
        <childnode refid="339" relation="include">
        </childnode>
        <childnode refid="340" relation="include">
        </childnode>
        <childnode refid="341" relation="include">
        </childnode>
        <childnode refid="342" relation="include">
        </childnode>
        <childnode refid="343" relation="include">
        </childnode>
        <childnode refid="344" relation="include">
        </childnode>
        <childnode refid="345" relation="include">
        </childnode>
        <childnode refid="346" relation="include">
        </childnode>
        <childnode refid="347" relation="include">
        </childnode>
        <childnode refid="348" relation="include">
        </childnode>
        <childnode refid="349" relation="include">
        </childnode>
        <childnode refid="350" relation="include">
        </childnode>
        <childnode refid="351" relation="include">
        </childnode>
        <childnode refid="352" relation="include">
        </childnode>
        <childnode refid="353" relation="include">
        </childnode>
        <childnode refid="354" relation="include">
        </childnode>
        <childnode refid="355" relation="include">
        </childnode>
        <childnode refid="356" relation="include">
        </childnode>
        <childnode refid="357" relation="include">
        </childnode>
        <childnode refid="358" relation="include">
        </childnode>
        <childnode refid="359" relation="include">
        </childnode>
        <childnode refid="360" relation="include">
        </childnode>
        <childnode refid="361" relation="include">
        </childnode>
        <childnode refid="362" relation="include">
        </childnode>
        <childnode refid="363" relation="include">
        </childnode>
        <childnode refid="364" relation="include">
        </childnode>
        <childnode refid="365" relation="include">
        </childnode>
        <childnode refid="366" relation="include">
        </childnode>
        <childnode refid="367" relation="include">
        </childnode>
        <childnode refid="368" relation="include">
        </childnode>
        <childnode refid="369" relation="include">
        </childnode>
        <childnode refid="370" relation="include">
        </childnode>
        <childnode refid="371" relation="include">
        </childnode>
        <childnode refid="372" relation="include">
        </childnode>
        <childnode refid="373" relation="include">
        </childnode>
        <childnode refid="374" relation="include">
        </childnode>
        <childnode refid="375" relation="include">
        </childnode>
        <childnode refid="376" relation="include">
        </childnode>
        <childnode refid="377" relation="include">
        </childnode>
        <childnode refid="378" relation="include">
        </childnode>
        <childnode refid="379" relation="include">
        </childnode>
        <childnode refid="380" relation="include">
        </childnode>
        <childnode refid="381" relation="include">
        </childnode>
        <childnode refid="382" relation="include">
        </childnode>
        <childnode refid="383" relation="include">
        </childnode>
        <childnode refid="384" relation="include">
        </childnode>
        <childnode refid="385" relation="include">
        </childnode>
        <childnode refid="386" relation="include">
        </childnode>
        <childnode refid="387" relation="include">
        </childnode>
        <childnode refid="388" relation="include">
        </childnode>
        <childnode refid="389" relation="include">
        </childnode>
        <childnode refid="390" relation="include">
        </childnode>
        <childnode refid="391" relation="include">
        </childnode>
        <childnode refid="392" relation="include">
        </childnode>
        <childnode refid="393" relation="include">
        </childnode>
        <childnode refid="394" relation="include">
        </childnode>
        <childnode refid="395" relation="include">
        </childnode>
        <childnode refid="396" relation="include">
        </childnode>
        <childnode refid="397" relation="include">
        </childnode>
        <childnode refid="398" relation="include">
        </childnode>
        <childnode refid="399" relation="include">
        </childnode>
        <childnode refid="400" relation="include">
        </childnode>
        <childnode refid="401" relation="include">
        </childnode>
        <childnode refid="402" relation="include">
        </childnode>
        <childnode refid="403" relation="include">
        </childnode>
        <childnode refid="404" relation="include">
        </childnode>
        <childnode refid="405" relation="include">
        </childnode>
        <childnode refid="406" relation="include">
        </childnode>
        <childnode refid="407" relation="include">
        </childnode>
        <childnode refid="408" relation="include">
        </childnode>
        <childnode refid="409" relation="include">
        </childnode>
        <childnode refid="410" relation="include">
        </childnode>
        <childnode refid="411" relation="include">
        </childnode>
        <childnode refid="412" relation="include">
        </childnode>
        <childnode refid="413" relation="include">
        </childnode>
        <childnode refid="414" relation="include">
        </childnode>
        <childnode refid="415" relation="include">
        </childnode>
        <childnode refid="416" relation="include">
        </childnode>
        <childnode refid="417" relation="include">
        </childnode>
        <childnode refid="418" relation="include">
        </childnode>
        <childnode refid="419" relation="include">
        </childnode>
        <childnode refid="420" relation="include">
        </childnode>
        <childnode refid="421" relation="include">
        </childnode>
        <childnode refid="422" relation="include">
        </childnode>
        <childnode refid="423" relation="include">
        </childnode>
        <childnode refid="424" relation="include">
        </childnode>
        <childnode refid="425" relation="include">
        </childnode>
        <childnode refid="426" relation="include">
        </childnode>
        <childnode refid="427" relation="include">
        </childnode>
        <childnode refid="428" relation="include">
        </childnode>
        <childnode refid="429" relation="include">
        </childnode>
        <childnode refid="430" relation="include">
        </childnode>
        <childnode refid="431" relation="include">
        </childnode>
        <childnode refid="432" relation="include">
        </childnode>
        <childnode refid="433" relation="include">
        </childnode>
        <childnode refid="434" relation="include">
        </childnode>
        <childnode refid="435" relation="include">
        </childnode>
        <childnode refid="436" relation="include">
        </childnode>
        <childnode refid="437" relation="include">
        </childnode>
        <childnode refid="438" relation="include">
        </childnode>
        <childnode refid="439" relation="include">
        </childnode>
        <childnode refid="440" relation="include">
        </childnode>
        <childnode refid="441" relation="include">
        </childnode>
        <childnode refid="442" relation="include">
        </childnode>
        <childnode refid="443" relation="include">
        </childnode>
        <childnode refid="444" relation="include">
        </childnode>
        <childnode refid="445" relation="include">
        </childnode>
        <childnode refid="446" relation="include">
        </childnode>
        <childnode refid="447" relation="include">
        </childnode>
        <childnode refid="448" relation="include">
        </childnode>
        <childnode refid="449" relation="include">
        </childnode>
        <childnode refid="450" relation="include">
        </childnode>
        <childnode refid="451" relation="include">
        </childnode>
        <childnode refid="452" relation="include">
        </childnode>
        <childnode refid="453" relation="include">
        </childnode>
        <childnode refid="454" relation="include">
        </childnode>
        <childnode refid="455" relation="include">
        </childnode>
        <childnode refid="456" relation="include">
        </childnode>
        <childnode refid="457" relation="include">
        </childnode>
        <childnode refid="458" relation="include">
        </childnode>
        <childnode refid="459" relation="include">
        </childnode>
        <childnode refid="460" relation="include">
        </childnode>
        <childnode refid="461" relation="include">
        </childnode>
        <childnode refid="462" relation="include">
        </childnode>
        <childnode refid="463" relation="include">
        </childnode>
        <childnode refid="464" relation="include">
        </childnode>
        <childnode refid="465" relation="include">
        </childnode>
        <childnode refid="466" relation="include">
        </childnode>
        <childnode refid="467" relation="include">
        </childnode>
        <childnode refid="468" relation="include">
        </childnode>
        <childnode refid="469" relation="include">
        </childnode>
        <childnode refid="470" relation="include">
        </childnode>
        <childnode refid="471" relation="include">
        </childnode>
        <childnode refid="472" relation="include">
        </childnode>
        <childnode refid="473" relation="include">
        </childnode>
        <childnode refid="262" relation="include">
        </childnode>
      </node>
      <node id="328">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/vcruntime_typeinfo.h</label>
      </node>
      <node id="371">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/map</label>
      </node>
      <node id="438">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/cuda_types.hpp</label>
      </node>
      <node id="300">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/type_traits</label>
      </node>
      <node id="319">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/ostream</label>
      </node>
      <node id="432">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/shape/hist_cost.hpp</label>
      </node>
      <node id="443">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/util.hpp</label>
      </node>
      <node id="320">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/ios</label>
      </node>
      <node id="329">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xlocinfo</label>
      </node>
      <node id="463">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/motion_core.hpp</label>
      </node>
      <node id="294">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xstddef</label>
      </node>
      <node id="369">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/dnn/dnn.hpp</label>
      </node>
      <node id="434">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching.hpp</label>
      </node>
      <node id="459">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/stabilizer.hpp</label>
      </node>
      <node id="439">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/cuda.inl.hpp</label>
      </node>
      <node id="415">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/imgcodecs.hpp</label>
      </node>
      <node id="391">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/dist.h</label>
      </node>
      <node id="342">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/saturate.hpp</label>
      </node>
      <node id="367">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/calib3d/calib3d_c.h</label>
      </node>
      <node id="304">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xutility</label>
      </node>
      <node id="350">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/operations.hpp</label>
      </node>
      <node id="413">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/sampling.h</label>
      </node>
      <node id="255">
        <label>iostream</label>
      </node>
      <node id="392">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/heap.h</label>
      </node>
      <node id="282">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/stdlib.h</label>
      </node>
      <node id="308">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/stdio.h</label>
      </node>
      <node id="336">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/ptr.inl.hpp</label>
      </node>
      <node id="314">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/cvstd.hpp</label>
      </node>
      <node id="297">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xtr1common</label>
      </node>
      <node id="437">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/cuda.hpp</label>
      </node>
      <node id="425">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/objdetect/detection_based_tracker.hpp</label>
      </node>
      <node id="374">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/dnn/layer.hpp</label>
      </node>
      <node id="346">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/mat.hpp</label>
      </node>
      <node id="330">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xlocinfo.h</label>
      </node>
      <node id="310">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/string.h</label>
      </node>
      <node id="366">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/affine.hpp</label>
      </node>
      <node id="440">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/warpers_inl.hpp</label>
      </node>
      <node id="352">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/complex</label>
      </node>
      <node id="341">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/matx.hpp</label>
      </node>
      <node id="408">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/time.h</label>
      </node>
      <node id="389">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/kdtree_index.h</label>
      </node>
      <node id="386">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/result_set.h</label>
      </node>
      <node id="303">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/vcruntime_new.h</label>
      </node>
      <node id="361">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/calib3d.hpp</label>
      </node>
      <node id="372">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/tuple</label>
      </node>
      <node id="418">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/imgproc/imgproc_c.h</label>
      </node>
      <node id="290">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cwchar</label>
      </node>
      <node id="323">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xiosbase</label>
      </node>
      <node id="287">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cmath</label>
      </node>
      <node id="325">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/stdexcept</label>
      </node>
      <node id="470">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/fast_marching_inl.hpp</label>
      </node>
      <node id="402">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/lsh_index.h</label>
      </node>
      <node id="291">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/wchar.h</label>
      </node>
      <node id="298">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/new</label>
      </node>
      <node id="354">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/sstream</label>
      </node>
      <node id="295">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cstddef</label>
      </node>
      <node id="474">
        <label>circleFilter.h</label>
        <link refid="circle_filter_8h"/>
        <childnode refid="258" relation="include">
        </childnode>
        <childnode refid="262" relation="include">
        </childnode>
      </node>
      <node id="450">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/seam_finders.hpp</label>
      </node>
      <node id="276">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/yvals.h</label>
      </node>
      <node id="464">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/outlier_rejection.hpp</label>
      </node>
      <node id="382">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/any.h</label>
      </node>
      <node id="277">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/algorithm</label>
      </node>
      <node id="473">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/ring_buffer.hpp</label>
      </node>
      <node id="456">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/video/background_segm.hpp</label>
      </node>
      <node id="362">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/features2d.hpp</label>
      </node>
      <node id="460">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/global_motion.hpp</label>
      </node>
      <node id="406">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xloctime</label>
      </node>
      <node id="379">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/general.h</label>
      </node>
      <node id="274">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/base.hpp</label>
      </node>
      <node id="313">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xatomic.h</label>
      </node>
      <node id="404">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/iomanip</label>
      </node>
      <node id="436">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/warpers.hpp</label>
      </node>
      <node id="393">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/allocator.h</label>
      </node>
      <node id="403">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/lsh_table.h</label>
      </node>
      <node id="467">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/log.hpp</label>
      </node>
      <node id="326">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/xstring</label>
      </node>
      <node id="365">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/config.h</label>
      </node>
      <node id="281">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cstdlib</label>
      </node>
      <node id="270">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/stdbool.h</label>
      </node>
      <node id="420">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/imgcodecs/imgcodecs_c.h</label>
      </node>
      <node id="416">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videoio.hpp</label>
      </node>
      <node id="465">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/videostab/motion_stabilizing.hpp</label>
      </node>
      <node id="442">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/stitching/detail/motion_estimators.hpp</label>
      </node>
      <node id="399">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/composite_index.h</label>
      </node>
      <node id="283">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/limits</label>
      </node>
      <node id="260">
        <label>GA.h</label>
        <link refid="_g_a_8h"/>
        <childnode refid="259" relation="include">
        </childnode>
        <childnode refid="261" relation="include">
        </childnode>
        <childnode refid="258" relation="include">
        </childnode>
      </node>
      <node id="335">
        <label>C:/Program Files (x86)/Windows Kits/10/Include/10.0.10240.0/ucrt/share.h</label>
      </node>
      <node id="394">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/random.h</label>
      </node>
      <node id="280">
        <label>D:/Program Files (x86)/Microsoft Visual Studio 14.0/VC/include/cstdint</label>
      </node>
      <node id="359">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core/optim.hpp</label>
      </node>
      <node id="401">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/flann/hierarchical_clustering_index.h</label>
      </node>
      <node id="265">
        <label>D:/Program Files (x86)/opencv/build/include/opencv2/core.hpp</label>
      </node>
    </incdepgraph>
      <sectiondef kind="func">
      <memberdef kind="function" id="main_8cpp_1aa838e06497de10df7b1f0af2ea50d37d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Mat</type>
        <definition>Mat syntheticFastener</definition>
        <argsstring>(float c, float radius=100, float radius_hex=70)</argsstring>
        <name>syntheticFastener</name>
        <param>
          <type>float</type>
          <declname>c</declname>
        </param>
        <param>
          <type>float</type>
          <declname>radius</declname>
          <defval>100</defval>
        </param>
        <param>
          <type>float</type>
          <declname>radius_hex</declname>
          <defval>70</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp" line="10" column="1" bodyfile="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp" bodystart="589" bodyend="621"/>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1aeb7612962d1fbf5c7be9902e48ffdc3a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>Mat</type>
        <definition>Mat syntheticFastenerContour</definition>
        <argsstring>(float c, float radius=100, float radius_hex=70)</argsstring>
        <name>syntheticFastenerContour</name>
        <param>
          <type>float</type>
          <declname>c</declname>
        </param>
        <param>
          <type>float</type>
          <declname>radius</declname>
          <defval>100</defval>
        </param>
        <param>
          <type>float</type>
          <declname>radius_hex</declname>
          <defval>70</defval>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp" line="11" column="1" bodyfile="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp" bodystart="622" bodyend="654"/>
        <referencedby refid="main_8cpp_1ae66f6b31b5ad750f1fe042a706a4e3d4" compoundref="main_8cpp" startline="14" endline="587">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1a671cfb0ff1d0b10bc6877d1d9e46b91f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void MHL</definition>
        <argsstring>(Mat cntImg, Mat srcImg)</argsstring>
        <name>MHL</name>
        <param>
          <type>Mat</type>
          <declname>cntImg</declname>
        </param>
        <param>
          <type>Mat</type>
          <declname>srcImg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp" line="12" column="1" bodyfile="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp" bodystart="655" bodyend="956"/>
        <referencedby refid="main_8cpp_1ae66f6b31b5ad750f1fe042a706a4e3d4" compoundref="main_8cpp" startline="14" endline="587">main</referencedby>
      </memberdef>
      <memberdef kind="function" id="main_8cpp_1ae66f6b31b5ad750f1fe042a706a4e3d4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int main</definition>
        <argsstring>()</argsstring>
        <name>main</name>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
<para><emphasis>circleImg.forEach&lt;float&gt;([](float&amp; p, const int</emphasis> pos) </para>        </inbodydescription>
        <location file="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp" line="14" column="1" bodyfile="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp" bodystart="14" bodyend="587"/>
        <references refid="_n_c_r_f_8cpp_1a6b1e96f4fbdc92dc8a4b1e400ec39e44" compoundref="_n_c_r_f_8cpp" startline="1205" endline="1244">drawButterflyNCRF</references>
        <references refid="main_8cpp_1a671cfb0ff1d0b10bc6877d1d9e46b91f" compoundref="main_8cpp" startline="655" endline="956">MHL</references>
        <references refid="_n_c_r_f_8cpp_1a14b7303b7f3a6e33f7210103d3649207" compoundref="_n_c_r_f_8cpp" startline="1141" endline="1203">NonCrf_fastener</references>
        <references refid="main_8cpp_1aeb7612962d1fbf5c7be9902e48ffdc3a" compoundref="main_8cpp" startline="622" endline="654">syntheticFastenerContour</references>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&lt;iostream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;ctime&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="post_process_8h" kindref="compound">postProcess.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_g_a_8h" kindref="compound">GA.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_n_c_r_f_8h" kindref="compound">NCRF.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="bend_gabar_8h" kindref="compound">bendGabar.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="circle_filter_8h" kindref="compound">circleFilter.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal">std;</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal">Mat<sp/><ref refid="main_8cpp_1aa838e06497de10df7b1f0af2ea50d37d" kindref="member">syntheticFastener</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>c,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>100,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>radius_hex<sp/>=<sp/>70);</highlight></codeline>
<codeline lineno="11"><highlight class="normal">Mat<sp/><ref refid="main_8cpp_1aeb7612962d1fbf5c7be9902e48ffdc3a" kindref="member">syntheticFastenerContour</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>c,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>100,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>radius_hex<sp/>=<sp/>70);</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1a671cfb0ff1d0b10bc6877d1d9e46b91f" kindref="member">MHL</ref>(Mat<sp/>cntImg,<sp/>Mat<sp/>srcImg);</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="main_8cpp_1ae66f6b31b5ad750f1fe042a706a4e3d4" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1ae66f6b31b5ad750f1fe042a706a4e3d4" kindref="member">main</ref>()</highlight></codeline>
<codeline lineno="15"><highlight class="normal">{</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="_n_c_r_f_8cpp_1a6b1e96f4fbdc92dc8a4b1e400ec39e44" kindref="member">drawButterflyNCRF</ref>();</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//int<sp/>maskSize<sp/>=<sp/>9;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vector&lt;float&gt;<sp/>individual;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vector&lt;float&gt;<sp/>individual1;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vector&lt;float&gt;<sp/>individual2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//float<sp/>sumCoef<sp/>=<sp/>0;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//float<sp/>a1<sp/>=<sp/>0;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//float<sp/>a2<sp/>=<sp/>0;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//float<sp/>sigma1<sp/>=<sp/>rand()<sp/>%<sp/>100<sp/>*<sp/>0.01<sp/>+<sp/>1.6;//0.2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//float<sp/>sigma2<sp/>=<sp/>rand()<sp/>%<sp/>100<sp/>*<sp/>0.01<sp/>+<sp/>0.8;//0.8;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//sigma2<sp/>=<sp/>2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//sigma1<sp/>=<sp/>3<sp/>*<sp/>sigma2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for<sp/>(int<sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>maskSize<sp/>*<sp/>maskSize;<sp/>j++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>int<sp/>disx<sp/>=<sp/>j<sp/>/<sp/>maskSize<sp/>-<sp/>maskSize<sp/>/<sp/>2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>int<sp/>disy<sp/>=<sp/>j<sp/>%<sp/>maskSize<sp/>-<sp/>maskSize<sp/>/<sp/>2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>float<sp/>g1<sp/>=<sp/>1<sp/>/<sp/>sqrt(2<sp/>*<sp/>CV_PI<sp/>*<sp/>sigma1<sp/>*<sp/>sigma1)<sp/>*<sp/>(exp(-(disx*disx<sp/>+<sp/>disy<sp/>*<sp/>disy)<sp/>/<sp/>(2<sp/>*<sp/>sigma1<sp/>*<sp/>sigma1)));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>//float<sp/>g2<sp/>=<sp/>1<sp/>/<sp/>sqrt(2<sp/>*<sp/>CV_PI<sp/>*<sp/>sigma2<sp/>*<sp/>sigma2)<sp/>*<sp/>(exp(-(disx*disx<sp/>+<sp/>disy<sp/>*<sp/>disy)<sp/>/<sp/>(2<sp/>*<sp/>sigma2<sp/>*<sp/>sigma2)));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>float<sp/>g2<sp/>=<sp/>(-2<sp/>*<sp/>sigma2<sp/>*<sp/>sigma2<sp/>+<sp/>disx<sp/>*<sp/>disx<sp/>+<sp/>disy<sp/>*<sp/>disy)<sp/>/<sp/>(2<sp/>*<sp/>CV_PI<sp/>*<sp/>sigma2<sp/>*<sp/>sigma2<sp/>*<sp/>sigma2<sp/>*<sp/>sigma2<sp/>*<sp/>sigma2<sp/>*sigma2)<sp/>*<sp/>exp(-(disx*disx<sp/>+<sp/>disy<sp/>*<sp/>disy)<sp/>/<sp/>(2<sp/>*<sp/>sigma2<sp/>*<sp/>sigma2));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>individual.push_back(g1<sp/>-<sp/>g2);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>individual1.push_back(g1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>individual2.push_back(g2);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>sumCoef<sp/>+=<sp/>g1<sp/>-<sp/>g2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>a1<sp/>+=<sp/>g1;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>a2<sp/>+=<sp/>g2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for<sp/>(int<sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>maskSize<sp/>*<sp/>maskSize;<sp/>j++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>individual.at(j)<sp/>/=<sp/>sumCoef;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>individual1.at(j)<sp/>/=<sp/>a1;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>individual2.at(j)<sp/>/=<sp/>a2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>img<sp/>=<sp/>imread(&quot;myData\\1.jpg&quot;);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//img.convertTo(img,<sp/>CV_32F,<sp/>1<sp/>/255.0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cvtColor(img,<sp/>img,<sp/>COLOR_BGR2GRAY);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>msk(maskSize,<sp/>maskSize,<sp/>CV_32F);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>msk1(maskSize,<sp/>maskSize,<sp/>CV_32F);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>msk2(maskSize,<sp/>maskSize,<sp/>CV_32F);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for<sp/>(int<sp/>r<sp/>=<sp/>0;<sp/>r<sp/>&lt;<sp/>maskSize;<sp/>r++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>for<sp/>(int<sp/>c<sp/>=<sp/>0;<sp/>c<sp/>&lt;<sp/>maskSize;<sp/>c++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>msk.at&lt;float&gt;(r,<sp/>c)<sp/>=<sp/>individual.at(r<sp/>*<sp/>maskSize<sp/>+<sp/>c);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>msk1.at&lt;float&gt;(r,<sp/>c)<sp/>=<sp/>individual1.at(r<sp/>*<sp/>maskSize<sp/>+<sp/>c);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>msk2.at&lt;float&gt;(r,<sp/>c)<sp/>=<sp/>individual2.at(r<sp/>*<sp/>maskSize<sp/>+<sp/>c);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>img1,<sp/>img2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//filter2D(img,<sp/>img,<sp/>img.depth(),<sp/>msk);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//filter2D(img,<sp/>img1,<sp/>img.depth(),<sp/>msk1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//filter2D(img,<sp/>img2,<sp/>img.depth(),<sp/>msk2);</highlight></codeline>
<codeline lineno="68"><highlight class="comment"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//normalize(img,<sp/>img,<sp/>0,<sp/>1,<sp/>NORM_MINMAX);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//imshow(&quot;img&quot;,<sp/>img2);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//waitKey();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//GA();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>path<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;C:\\Users\\pengzhyong\\Desktop\\CV\\\\contour<sp/>detection\\contours\\images\\&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>srcImg1<sp/>=<sp/>imread(path<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;bear_3.pgm&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>srcImg2<sp/>=<sp/>imread(path<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;goat_3.pgm&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>srcImg3<sp/>=<sp/>imread(path<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;rino.pgm&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>gtImg1<sp/>=<sp/>imread(path<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;gt\\bear_3_gt_binary.pgm&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>gtImg2<sp/>=<sp/>imread(path<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;gt\\goat_3_gt_binary.pgm&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>gtImg3<sp/>=<sp/>imread(path<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;gt\\rino_gt_binary.pgm&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Mat&gt;<sp/>trainVec,<sp/>gtVec;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>cvtColor(srcImg1,<sp/>srcImg1,<sp/>COLOR_BGR2GRAY);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>cvtColor(srcImg2,<sp/>srcImg2,<sp/>COLOR_BGR2GRAY);</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/>cvtColor(srcImg3,<sp/>srcImg3,<sp/>COLOR_BGR2GRAY);</highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>cvtColor(gtImg1,<sp/>gtImg1,<sp/>COLOR_BGR2GRAY);</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>cvtColor(gtImg2,<sp/>gtImg2,<sp/>COLOR_BGR2GRAY);</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>cvtColor(gtImg3,<sp/>gtImg3,<sp/>COLOR_BGR2GRAY);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/>srcImg1.convertTo(srcImg1,<sp/>CV_32F,<sp/>1<sp/>/<sp/>255.0);</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>srcImg2.convertTo(srcImg2,<sp/>CV_32F,<sp/>1<sp/>/<sp/>255.0);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>srcImg3.convertTo(srcImg3,<sp/>CV_32F,<sp/>1<sp/>/<sp/>255.0);</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/>gtImg1.convertTo(gtImg1,<sp/>CV_32F,<sp/>1<sp/>/<sp/>255.0);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>gtImg2.convertTo(gtImg2,<sp/>CV_32F,<sp/>1<sp/>/<sp/>255.0);</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/>gtImg3.convertTo(gtImg3,<sp/>CV_32F,<sp/>1<sp/>/<sp/>255.0);</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>circleImg(srcImg3.size(),<sp/>srcImg3.type(),<sp/>Scalar(0));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//circle(circleImg,<sp/>Point2f(srcImg3.rows<sp/>/<sp/>2,<sp/>srcImg3.cols<sp/>/<sp/>2),<sp/>100,<sp/>Scalar(1));</highlight></codeline>
<codeline lineno="102"><highlight class="comment"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>-&gt;void<sp/>{float<sp/>rd<sp/>=<sp/>rand()<sp/>%<sp/>2;<sp/>if<sp/>(rd<sp/>&lt;<sp/>0.001)<sp/>p<sp/>=<sp/>1.0;<sp/>});*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for<sp/>(int<sp/>r<sp/>=<sp/>0;<sp/>r<sp/>&lt;<sp/>circleImg.rows;<sp/>r++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//{<sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>for<sp/>(int<sp/>c<sp/>=<sp/>0;<sp/>c<sp/>&lt;<sp/>circleImg.cols;<sp/>c++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>float<sp/>rd<sp/>=<sp/>rand()<sp/>%<sp/>100<sp/>*<sp/>0.01;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>if<sp/>(rd<sp/>&lt;<sp/>0.3)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circleImg.at&lt;float&gt;(r,<sp/>c)<sp/>=<sp/>1.0;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//imshow(&quot;circle&quot;,<sp/>circleImg);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//waitKey(0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>c1<sp/>=<sp/>CircleDetection(circleImg,<sp/>100);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>c2<sp/>=<sp/>CircleDetection(c1,<sp/>100);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>c3<sp/>=<sp/>CircleDetection(c2,<sp/>100);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>c4<sp/>=<sp/>CircleDetection(c3,<sp/>100);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>c5<sp/>=<sp/>CircleDetection(c4,<sp/>100);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>c6<sp/>=<sp/>CircleDetection(c5,<sp/>100);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>c7<sp/>=<sp/>CircleDetection(c6,<sp/>100);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>fastener<sp/>=<sp/><ref refid="main_8cpp_1aeb7612962d1fbf5c7be9902e48ffdc3a" kindref="member">syntheticFastenerContour</ref>(0.0);</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;systhetic&quot;</highlight><highlight class="normal">,<sp/>fastener);</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/lmImg.jpg&quot;</highlight><highlight class="normal">,<sp/>fastener);</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"></highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>lm1ROI<sp/>=<sp/>fastener(Rect(fastener.rows/2.0-100,<sp/>fastener.cols<sp/>/<sp/>2.0<sp/>-<sp/>100,<sp/>200,<sp/>200));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//imshow(&quot;ROI&quot;,<sp/>lm1ROI);<sp/>waitKey();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vector&lt;Vec2f&gt;<sp/>lines0;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//lm1ROI.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/>const<sp/>int*<sp/>pos)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>-&gt;void<sp/>{if<sp/>(p<sp/>&gt;<sp/>0)p<sp/>=<sp/>0;<sp/>else<sp/>p<sp/>=<sp/>255;<sp/>});</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//HoughLines(lm1ROI,<sp/>lines0,<sp/>1,<sp/>5*CV_PI<sp/>/<sp/>180.0,<sp/>40);//<sp/>,<sp/>0,<sp/>0,<sp/>10.0<sp/>/<sp/>180.0*CV_PI);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for<sp/>(size_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>lines0.size();<sp/>i++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>float<sp/>rho<sp/>=<sp/>lines0[i][0];</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>float<sp/>theta<sp/>=<sp/>lines0[i][1];</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>double<sp/>a<sp/>=<sp/>cos(theta),<sp/>b<sp/>=<sp/>sin(theta);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>double<sp/>x0<sp/>=<sp/>a*rho,<sp/>y0<sp/>=<sp/>b*rho;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>Point<sp/>pt1(cvRound(x0<sp/>+<sp/>1000<sp/>*<sp/>(-b)),</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>cvRound(y0<sp/>+<sp/>1000<sp/>*<sp/>(a)));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>Point<sp/>pt2(cvRound(x0<sp/>-<sp/>1000<sp/>*<sp/>(-b)),</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>cvRound(y0<sp/>-<sp/>1000<sp/>*<sp/>(a)));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>line(lm1ROI,<sp/>pt1,<sp/>pt2,<sp/>Scalar(255),<sp/>1,<sp/>8);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//imshow(&quot;test<sp/>line&quot;,<sp/>lm1ROI);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//waitKey();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"></highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">string</highlight><highlight class="normal"><sp/>path_lm<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;C:\\Users\\pengzhyong\\Desktop\\\\Capture\\&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>lmImg<sp/>=<sp/>imread(path_lm<sp/>+<sp/></highlight><highlight class="stringliteral">&quot;10.jpg&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>lmImg.convertTo(lmImg,<sp/>CV_8U);</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(max(lmImg.rows,<sp/>lmImg.cols)<sp/>&gt;<sp/>800)</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pyrDown(lmImg,<sp/>lmImg);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>cvtColor(lmImg,<sp/>lmImg,<sp/>COLOR_BGR2GRAY);</highlight></codeline>
<codeline lineno="158"><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>srcImg<sp/>=<sp/>lmImg.clone();</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//lmImg<sp/>=<sp/>fastener;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------canny</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/>blur(lmImg,<sp/>lmImg,<sp/>Size(3,3));</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//GaussianBlur(lmImg,<sp/>lmImg,<sp/>Size(7,<sp/>7),<sp/>5);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>cannyImg;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>Canny(lmImg,<sp/>cannyImg,<sp/>80,<sp/>120,<sp/>3);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/>cannyImg.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>pos)</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p<sp/>&gt;<sp/>0)<sp/>p<sp/>=<sp/>0;<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>p<sp/>=<sp/>255;<sp/>});</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;canny&quot;</highlight><highlight class="normal">,<sp/>cannyImg);</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/canny_0.jpg&quot;</highlight><highlight class="normal">,<sp/>cannyImg);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/>lmImg.convertTo(lmImg,<sp/>CV_32F,<sp/>1<sp/>/<sp/>255.0);</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>roteMat<sp/>=<sp/>getRotationMatrix2D(Point2f(lmImg.cols<sp/>/<sp/>2.0,<sp/>lmImg.rows<sp/>/<sp/>2.0),<sp/>0,<sp/>1.0);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>result;</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/>warpAffine(srcImg,<sp/>result,<sp/>roteMat,<sp/>lmImg.size());</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/>lmImg<sp/>=<sp/>result.clone();</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;lmImg<sp/>rotate&quot;</highlight><highlight class="normal">,<sp/>lmImg);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey(0);</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>circleImg1<sp/>=<sp/>result.clone();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec3f&gt;<sp/>circles1;</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>tmp1<sp/>=<sp/>cannyImg.clone();</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//tmp1.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/>const<sp/>int*<sp/>pos)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>-&gt;void<sp/>{if<sp/>(p<sp/>&gt;<sp/>0)p<sp/>=<sp/>0;<sp/>else<sp/>p<sp/>=<sp/>255;<sp/>});</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;tmp1&quot;</highlight><highlight class="normal">,<sp/>tmp1);</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>circleImg1<sp/>=<sp/>tmp1.clone();</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/>HoughCircles(tmp1,<sp/>circles1,<sp/>HOUGH_GRADIENT,</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1,<sp/>tmp1.rows<sp/>/<sp/>4,<sp/>60,<sp/>10,<sp/>55,<sp/>60);</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>1;<sp/>i++)</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles1[i][0]),<sp/>cvRound(circles1[i][1]));</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles1[i][2]);</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(circleImg1,<sp/>center,<sp/>3,<sp/>Scalar(0),<sp/>-1,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>outline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(circleImg1,<sp/>center,<sp/>radius,<sp/>Scalar(0),<sp/>3,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;hough<sp/>circle1&quot;</highlight><highlight class="normal">,<sp/>circleImg1);</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/cannycircle_0.jpg&quot;</highlight><highlight class="normal">,<sp/>circleImg1);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-----------non-crf</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>lm1<sp/>=<sp/><ref refid="_n_c_r_f_8cpp_1a14b7303b7f3a6e33f7210103d3649207" kindref="member">NonCrf_fastener</ref>(lmImg,<sp/>2,<sp/>0.03,<sp/>0.08);</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="main_8cpp_1a671cfb0ff1d0b10bc6877d1d9e46b91f" kindref="member">MHL</ref>(lm1,<sp/>srcImg);</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>tmp<sp/>=<sp/>lm1.clone();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//tmp.convertTo(tmp,<sp/>CV_8U,<sp/>255);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>circleImg<sp/>=<sp/>tmp.clone();</highlight></codeline>
<codeline lineno="214"><highlight class="comment"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vector&lt;Vec3f&gt;<sp/>circles;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//HoughCircles(tmp,<sp/>circles,<sp/>HOUGH_GRADIENT,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>1,<sp/>tmp.rows<sp/>/<sp/>4,<sp/>100,<sp/>100,<sp/>90,<sp/>110);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for<sp/>(size_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>circles.size();<sp/>i++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>Point<sp/>center(cvRound(circles[i][0]),<sp/>cvRound(circles[i][1]));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>int<sp/>radius<sp/>=<sp/>cvRound(circles[i][2]);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>//<sp/>draw<sp/>the<sp/>circle<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>circle(circleImg,<sp/>center,<sp/>3,<sp/>Scalar(0),<sp/>-1,<sp/>8,<sp/>0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>//<sp/>draw<sp/>the<sp/>circle<sp/>outline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>circle(circleImg,<sp/>center,<sp/>radius,<sp/>Scalar(0),<sp/>3,<sp/>8,<sp/>0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//imshow(&quot;hough<sp/>circle<sp/>NCRF&quot;,<sp/>circleImg);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//waitKey();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight></codeline>
<codeline lineno="230"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//------LSD<sp/>line<sp/>segment<sp/>detector</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/>lm1.convertTo(lm1,<sp/>CV_8U,<sp/>255);</highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/>Ptr&lt;LineSegmentDetector&gt;<sp/>ls<sp/>=<sp/>createLineSegmentDetector(LSD_REFINE_STD);</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Ptr&lt;LineSegmentDetector&gt;<sp/>ls<sp/>=<sp/>createLineSegmentDetector(LSD_REFINE_NONE);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4f&gt;<sp/>lines_std;</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Detect<sp/>the<sp/>lines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/>ls-&gt;detect(lm1,<sp/>lines_std);</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;float&gt;<sp/>lines_len;</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>i<sp/>:<sp/>lines_std)</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines_len.push_back((i[0]<sp/>-<sp/>i[2])*(i[0]<sp/>-<sp/>i[2])<sp/>+<sp/>(i[1]<sp/>-<sp/>i[3])*(i[1]<sp/>-<sp/>i[3]));</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/>sort(lines_len.begin(),<sp/>lines_len.end());</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>mantain_rate<sp/>=<sp/>0.35;</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4f&gt;<sp/>lines_new;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>i<sp/>:<sp/>lines_std)</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(((i[0]<sp/>-<sp/>i[2])*(i[0]<sp/>-<sp/>i[2])<sp/>+<sp/>(i[1]<sp/>-<sp/>i[3])*(i[1]<sp/>-<sp/>i[3]))<sp/>&gt;<sp/>lines_len.at(lines_len.size()<sp/>*<sp/>(1<sp/>-<sp/>mantain_rate)))</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines_new.push_back(i);</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="248"><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>drawnLines(lm1);</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/>ls-&gt;drawSegments(drawnLines,<sp/>lines_new);</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;Standard<sp/>refinement&quot;</highlight><highlight class="normal">,<sp/>drawnLines);</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey(0);</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------find<sp/>hexagon<sp/>by<sp/>angle<sp/>difference</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------if<sp/>a<sp/>segment<sp/>is<sp/>of<sp/>hexagon,<sp/>the<sp/>different<sp/>of<sp/>angle<sp/>to<sp/>other<sp/>edges<sp/>is<sp/>0,<sp/>60,<sp/>120</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;float&gt;<sp/>lines_k;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>i<sp/>:<sp/>lines_new)</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>slope<sp/>=<sp/>atan((i[1]<sp/>-<sp/>i[3])<sp/>/<sp/>(i[0]<sp/>-<sp/>i[2]));</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines_k.push_back(slope);</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4f&gt;<sp/>hexagon;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>T<sp/>=<sp/>5.0<sp/>/<sp/>180.0<sp/>*<sp/>CV_PI;</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>lines_new.size();<sp/>i++)</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>cnt<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>lines_new.size();<sp/>j++)</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(j==i)<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(abs(abs(lines_k[i]<sp/>-<sp/>lines_k[j]-1.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0))<sp/>&lt;<sp/>T<sp/></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>abs(abs(lines_k[i]<sp/>-<sp/>lines_k[j]<sp/>-<sp/>2.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0))<sp/>&lt;<sp/>T)</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cnt++;</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>len<sp/>=<sp/>sqrt((lines_new[i][0]<sp/>-<sp/>lines_new[i][2])*(lines_new[i][0]<sp/>-<sp/>lines_new[i][2])<sp/>+<sp/>(lines_new[i][1]<sp/>-<sp/>lines_new[i][3])*(lines_new[i][1]<sp/>-<sp/>lines_new[i][3]));</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cnt<sp/>&gt;=<sp/>3)</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hexagon.push_back(lines_new[i]);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="279"><highlight class="normal"></highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>drawnLines2(lm1);</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/>ls-&gt;drawSegments(drawnLines2,<sp/>hexagon);</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/>namedWindow(</highlight><highlight class="stringliteral">&quot;Standard&quot;</highlight><highlight class="normal">,<sp/>0);</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;Standard&quot;</highlight><highlight class="normal">,<sp/>drawnLines2);</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey(0);</highlight></codeline>
<codeline lineno="285"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="286"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//---------HoughLine<sp/>detector</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/>lm1.convertTo(lm1,<sp/>CV_8U,<sp/>255);</highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/ncrf_0.jpg&quot;</highlight><highlight class="normal">,<sp/>lm1);;</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//lm1.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/>const<sp/>int*<sp/>pos)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>-&gt;void<sp/>{if<sp/>(p<sp/>==<sp/>0)<sp/>p<sp/>=<sp/>255;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>else<sp/>p<sp/>=<sp/>0;<sp/>});</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>dst_lines(lm1.size(),<sp/>CV_8UC3);</highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec3f&gt;<sp/>circles2;</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/>HoughCircles(lm1,<sp/>circles2,<sp/>HOUGH_GRADIENT,</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1,<sp/>lm1.rows<sp/>/<sp/>4,<sp/>60,<sp/>10,<sp/>55,<sp/>60);</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/>Point<sp/>center0(cvRound(circles2[0][0]),<sp/>cvRound(circles2[0][1]));</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius0<sp/>=<sp/>cvRound(circles2[0][2]);</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>min((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)circles2.size(),1);<sp/>i++)</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles2[i][0]),<sp/>cvRound(circles2[i][1]));</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles2[i][2]);</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(lm1,<sp/>center,<sp/>3,<sp/>Scalar(0),<sp/>-1,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>outline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(lm1,<sp/>center,<sp/>radius,<sp/>Scalar(0),<sp/>3,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;hough<sp/>circle2&quot;</highlight><highlight class="normal">,<sp/>lm1);</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/ncrfcircle_0.jpg&quot;</highlight><highlight class="normal">,<sp/>lm1);;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="312"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight></codeline>
<codeline lineno="313"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/>lm1.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>pos)</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p<sp/>&gt;<sp/>0)p<sp/>=<sp/>0;<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>p<sp/>=<sp/>255;<sp/>});</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec2f&gt;<sp/>lines;</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>lm1ROI<sp/>=<sp/>lm1(Rect(center0.x-radius0,center0.y-radius0,<sp/>2.0*radius0,<sp/>2.0*radius0));</highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/>HoughLines(lm1ROI,<sp/>lines,<sp/>3,<sp/>5*CV_PI<sp/>/<sp/>180.0,<sp/>50);</highlight><highlight class="comment">//<sp/>,<sp/>0,<sp/>0,<sp/>10.0<sp/>/<sp/>180.0*CV_PI);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/>lm1ROI<sp/>=<sp/>srcImg(Rect(center0.x<sp/>-<sp/>1.5*radius0,<sp/>center0.y<sp/>-<sp/>1.5*radius0,<sp/>3<sp/>*<sp/>radius0,<sp/>3<sp/>*<sp/>radius0));</highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>lines.size();<sp/>i++)</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>rho<sp/>=<sp/>lines[i][0];</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>theta<sp/>=<sp/>lines[i][1];</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>a<sp/>=<sp/>cos(theta),<sp/>b<sp/>=<sp/>sin(theta);</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>x0<sp/>=<sp/>a*rho,<sp/>y0<sp/>=<sp/>b*rho;</highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>pt1(cvRound(x0<sp/>+<sp/>1000<sp/>*<sp/>(-b)),</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cvRound(y0<sp/>+<sp/>1000<sp/>*<sp/>(a)));</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>pt2(cvRound(x0<sp/>-<sp/>1000<sp/>*<sp/>(-b)),</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cvRound(y0<sp/>-<sp/>1000<sp/>*<sp/>(a)));</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(lm1ROI,<sp/>pt1,<sp/>pt2,<sp/>Scalar(255),<sp/>1,<sp/>8);</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;lm1ROI&quot;</highlight><highlight class="normal">,<sp/>lm1ROI);<sp/>waitKey();</highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight></codeline>
<codeline lineno="334"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/>lm1.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>pos)</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p<sp/>&gt;<sp/>0)p<sp/>=<sp/>0;<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>p<sp/>=<sp/>255;<sp/>});</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4i&gt;<sp/>lines;</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/>HoughLinesP(lm1,<sp/>lines,<sp/>1,<sp/>5<sp/>*<sp/>CV_PI<sp/>/<sp/>180,<sp/>20,<sp/>10,<sp/>5);</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>lines.size();<sp/>i++)</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(dst_lines,<sp/>Point(lines[i][0],<sp/>lines[i][1]),</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point(lines[i][2],<sp/>lines[i][3]),<sp/>Scalar(0,<sp/>0,<sp/>255),<sp/>1,<sp/>8);</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="344"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//namedWindow(&quot;houghLine&quot;,<sp/>0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;houghLine&quot;</highlight><highlight class="normal">,<sp/>dst_lines);</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="347"><highlight class="normal"></highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------find<sp/>hexagon<sp/>by<sp/>angle<sp/>difference</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------if<sp/>a<sp/>segment<sp/>is<sp/>of<sp/>hexagon,<sp/>the<sp/>different<sp/>of<sp/>angle<sp/>to<sp/>other<sp/>edges<sp/>is<sp/>0,<sp/>60,<sp/>120</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>hexMat(lm1.size(),<sp/>CV_8U,<sp/>Scalar(255));</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;float&gt;<sp/>lines_k;</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>i<sp/>:<sp/>lines)</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="354"><highlight class="normal"></highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>slope<sp/>=<sp/>atan((i[1]<sp/>-<sp/>i[3])<sp/>*<sp/>1.0<sp/>/<sp/>(i[0]<sp/>-<sp/>i[2]));</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines_k.push_back(slope);</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4f&gt;<sp/>hexagon;</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>T<sp/>=<sp/>15.0<sp/>/<sp/>180.0<sp/>*<sp/>CV_PI;</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles2[0][0]),<sp/>cvRound(circles2[0][1]));</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles2[0][2]);</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//--------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>lines.size();<sp/>i++)</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>cnt<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>lines.size();<sp/>j++)</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(j<sp/>==<sp/>i)<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(abs(abs(abs(lines_k[i])<sp/>-<sp/>abs(lines_k[j]))<sp/>-<sp/>1.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0)<sp/>&lt;<sp/>T</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>abs(abs(abs(lines_k[i])<sp/>-<sp/>abs(lines_k[j]))<sp/>-<sp/>2.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0)<sp/>&lt;<sp/>T)</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cnt++;</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>len<sp/>=<sp/>sqrt((lines[i][0]<sp/>-<sp/>lines[i][2])*(lines[i][0]<sp/>-<sp/>lines[i][2])<sp/>+<sp/>(lines[i][1]<sp/>-<sp/>lines[i][3])*(lines[i][1]<sp/>-<sp/>lines[i][3]));</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cnt<sp/>&gt;=<sp/>2)</highlight><highlight class="comment">//<sp/>&amp;&amp;<sp/>len<sp/>&lt;<sp/>100)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(sqrt((lines[i][0]-center.x)*(lines[i][0]<sp/>-<sp/>center.x)+<sp/>(lines[i][1]<sp/>-<sp/>center.y)*(lines[i][1]<sp/>-<sp/>center.y))&gt;=radius-5</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||sqrt((lines[i][0]<sp/>-<sp/>center.x)*(lines[i][0]<sp/>-<sp/>center.x)<sp/>+<sp/>(lines[i][1]<sp/>-<sp/>center.y)*(lines[i][1]<sp/>-<sp/>center.y))<sp/>&lt;<sp/>radius*2.0/3.0</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||sqrt((lines[i][2]<sp/>-<sp/>center.x)*(lines[i][2]<sp/>-<sp/>center.x)<sp/>+<sp/>(lines[i][3]<sp/>-<sp/>center.y)*(lines[i][3]<sp/>-<sp/>center.y))&gt;=radius-5</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||sqrt((lines[i][2]<sp/>-<sp/>center.x)*(lines[i][2]<sp/>-<sp/>center.x)<sp/>+<sp/>(lines[i][3]<sp/>-<sp/>center.y)*(lines[i][3]<sp/>-<sp/>center.y))<sp/>&lt;radius*2.0<sp/>/<sp/>3.0)</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hexagon.push_back(lines[i]);</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(hexMat,<sp/>Point2f(lines[i][0],<sp/>lines[i][1]),<sp/>Point2f(lines[i][2],<sp/>lines[i][3]),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>min((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)circles2.size(),1);<sp/>i++)</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles2[i][0]),<sp/>cvRound(circles2[i][1]));</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles2[i][2]);</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(hexMat,<sp/>center,<sp/>2,<sp/>Scalar(0),<sp/>-1,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>outline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(hexMat,<sp/>center,<sp/>radius,<sp/>Scalar(0),<sp/>2,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="399"><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>drawnLines2(hexMat);</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//namedWindow(&quot;Standard&quot;,<sp/>0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;Standard&quot;</highlight><highlight class="normal">,<sp/>drawnLines2);</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey(0);</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/circleHex.jpg&quot;</highlight><highlight class="normal">,<sp/>drawnLines2);</highlight></codeline>
<codeline lineno="405"><highlight class="normal"></highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>drawcorner(drawnLines2.size(),<sp/>drawnLines2.type(),Scalar(0,<sp/>0,<sp/>0));</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/>drawcorner<sp/>=<sp/>drawnLines2.clone();</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/>drawcorner<sp/>=<sp/>srcImg.clone();</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>circles2.size();<sp/>i++)</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles2[i][0]),<sp/>cvRound(circles2[i][1]));</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles2[i][2]);</highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(drawcorner,<sp/>center,<sp/>2,<sp/>Scalar(0),<sp/>-1,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>outline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(drawcorner,<sp/>center,<sp/>radius,<sp/>Scalar(0),<sp/>2,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//vector&lt;Point2f&gt;<sp/>hex_corners;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/>map&lt;float,<sp/>Point2f&gt;<sp/>hex_corners;</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>segdistT<sp/>=<sp/>40;</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>hexagon.size();<sp/>i++)</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>slope1<sp/>=<sp/>atan((hexagon[i][1]<sp/>-<sp/>hexagon[i][3])<sp/>*<sp/>1.0<sp/>/<sp/>(hexagon[i][0]<sp/>-<sp/>hexagon[i][2]));</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>hexagon.size();<sp/>j++)</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(j<sp/>==<sp/>i)<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>slope2<sp/>=<sp/>atan((hexagon[j][1]<sp/>-<sp/>hexagon[j][3])<sp/>*<sp/>1.0<sp/>/<sp/>(hexagon[j][0]<sp/>-<sp/>hexagon[j][2]));</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(abs(abs(slope2<sp/>-<sp/>slope1)<sp/>-<sp/>1.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0)<sp/>&lt;<sp/>T<sp/></highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>abs(abs(slope2<sp/>-<sp/>slope1)<sp/>-<sp/>2.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0)<sp/>&lt;<sp/>T)</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dist1,<sp/>dist2,<sp/>dist3,<sp/>dist4;</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dist1<sp/>=<sp/>sqrt((hexagon[i][0]<sp/>-<sp/>hexagon[j][0])*(hexagon[i][0]<sp/>-<sp/>hexagon[j][0])</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>(hexagon[i][1]<sp/>-<sp/>hexagon[j][1])*(hexagon[i][1]<sp/>-<sp/>hexagon[j][1]));</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dist2<sp/>=<sp/>sqrt((hexagon[i][0]<sp/>-<sp/>hexagon[j][2])*(hexagon[i][0]<sp/>-<sp/>hexagon[j][2])</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>(hexagon[i][1]<sp/>-<sp/>hexagon[j][3])*(hexagon[i][1]<sp/>-<sp/>hexagon[j][3]));</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dist3<sp/>=<sp/>sqrt((hexagon[i][2]<sp/>-<sp/>hexagon[j][0])*(hexagon[i][2]<sp/>-<sp/>hexagon[j][0])</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>(hexagon[i][3]<sp/>-<sp/>hexagon[j][1])*(hexagon[i][3]<sp/>-<sp/>hexagon[j][1]));</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dist4<sp/>=<sp/>sqrt((hexagon[i][2]<sp/>-<sp/>hexagon[j][2])*(hexagon[i][2]<sp/>-<sp/>hexagon[j][2])</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>(hexagon[i][3]<sp/>-<sp/>hexagon[j][3])*(hexagon[i][3]<sp/>-<sp/>hexagon[j][3]));</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>segdist<sp/>=<sp/>min(min(dist1,<sp/>dist2),<sp/>min(dist3,<sp/>dist4));</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(1)</highlight><highlight class="comment">//segdist<sp/>&lt;<sp/>segdistT)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//line(drawcorner,<sp/>Point(hexagon[i][0],<sp/>hexagon[i][1]),<sp/>Point(hexagon[i][2],<sp/>hexagon[i][3]),<sp/>Scalar(0,<sp/>255,<sp/>0));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(drawcorner,<sp/>Point(hexagon[j][0],<sp/>hexagon[j][1]),<sp/>Point(hexagon[j][2],<sp/>hexagon[j][3]),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="446"><highlight class="normal"></highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k1,<sp/>k2,<sp/>b1,<sp/>b2;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>k1<sp/>=<sp/>(hexagon[i][1]<sp/>-<sp/>hexagon[i][3])<sp/>*<sp/>1.0<sp/>/<sp/>(hexagon[i][0]<sp/>-<sp/>hexagon[i][2]);</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>k2<sp/>=<sp/>(hexagon[j][1]<sp/>-<sp/>hexagon[j][3])<sp/>*<sp/>1.0<sp/>/<sp/>(hexagon[j][0]<sp/>-<sp/>hexagon[j][2]);</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b1<sp/>=<sp/>hexagon[i][1]<sp/>-<sp/>k1<sp/>*<sp/>hexagon[i][0];</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b2<sp/>=<sp/>hexagon[j][1]<sp/>-<sp/>k2<sp/>*<sp/>hexagon[j][0];</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross_x<sp/>=<sp/>(b2<sp/>-<sp/>b1)<sp/>/<sp/>(k1<sp/>-<sp/>k2);</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross_y<sp/>=<sp/>k2<sp/>*<sp/>cross_x<sp/>+<sp/>b2;</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//hex_corners.insert(segdist,<sp/>Point2f(cross_x,<sp/>cross_y));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(sqrt((cross_x-center.x)*(cross_x<sp/>-<sp/>center.x)+<sp/>(cross_y<sp/>-<sp/>center.y)*(cross_y<sp/>-<sp/>center.y))&lt;radius-5</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>sqrt((cross_x<sp/>-<sp/>center.x)*(cross_x<sp/>-<sp/>center.x)<sp/>+<sp/>(cross_y<sp/>-<sp/>center.y)*(cross_y<sp/>-<sp/>center.y))&gt;radius*3.22<sp/>/<sp/>4.0)</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hex_corners[segdist]<sp/>=<sp/>Point2f(cross_x,<sp/>cross_y);</highlight><highlight class="comment">//map,<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>finalRst<sp/>=<sp/>drawcorner.clone();</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>it<sp/>=<sp/>hex_corners.begin();<sp/>it<sp/>!=<sp/>hex_corners.end();<sp/>++it)</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(finalRst,<sp/>Point(it-&gt;second.x,<sp/>it-&gt;second.y),<sp/>3,<sp/>Scalar(255),1);</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;hex_corner&quot;</highlight><highlight class="normal">,<sp/>finalRst);</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/hexcorner.jpg&quot;</highlight><highlight class="normal">,<sp/>finalRst);</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-----------------distance<sp/>constrain<sp/>to<sp/>pick<sp/>out<sp/>3<sp/>convex<sp/>points</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>len<sp/>=<sp/>20.0;</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>st_dst[3]<sp/>=<sp/>{<sp/>len,<sp/>1.732*len,<sp/>2.0*len<sp/>};</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dist_T<sp/>=3;</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Point2f&gt;<sp/>hexVec;</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>it<sp/>=<sp/>hex_corners.begin();<sp/>it<sp/>!=<sp/>hex_corners.end();<sp/>++it)</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hexVec.push_back(Point2f(it-&gt;second.x,<sp/>it-&gt;second.y));</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;int&gt;<sp/>votes(hexVec.size(),<sp/>0);</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>hexVec.size();<sp/>i++)</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>hexVec.size();<sp/>j++)</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(i<sp/>!=<sp/>j)</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dist<sp/>=<sp/>sqrt((hexVec[i].x<sp/>-<sp/>hexVec[j].x)*(hexVec[i].x<sp/>-<sp/>hexVec[j].x)<sp/>+<sp/>(hexVec[i].y<sp/>-<sp/>hexVec[j].y)*(hexVec[i].y<sp/>-<sp/>hexVec[j].y));</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(abs(dist<sp/>-<sp/>st_dst[0])<sp/>&lt;<sp/>dist_T<sp/>||<sp/>abs(dist<sp/>-<sp/>st_dst[1])<sp/>&lt;<sp/>dist_T<sp/>||<sp/>abs(dist<sp/>-<sp/>st_dst[2])<sp/>&lt;<sp/>dist_T)</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>votes[j]++;</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>convex_cnt<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>min_votes<sp/>=<sp/>100;</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Point2f&gt;<sp/>three_convex;</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(convex_cnt&lt;3<sp/>&amp;&amp;<sp/>votes.size()<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>min_index<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i=<sp/>0;<sp/>i<sp/>&lt;<sp/>votes.size();<sp/>i++)</highlight></codeline>
<codeline lineno="501"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(votes[i]<sp/>&lt;<sp/>min_votes)</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_votes<sp/>=<sp/>votes[i];</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_index<sp/>=<sp/>i;</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>votes[min_index]<sp/>=<sp/>200;</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>three_convex.push_back(hexVec[min_index]);</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>convex_cnt++;</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_votes<sp/>=<sp/>100;</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="513"><highlight class="normal"></highlight></codeline>
<codeline lineno="514"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>threePoints(drawcorner);</highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>three_convex.size();<sp/>i++)</highlight></codeline>
<codeline lineno="516"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(threePoints,<sp/>Point(three_convex[i].x,<sp/>three_convex[i].y),<sp/>3,<sp/>Scalar(255),<sp/>1);</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(threePoints,<sp/>Point(three_convex[i<sp/>%<sp/>3].x,<sp/>three_convex[i<sp/>%<sp/>3].y),<sp/>Point(three_convex[(i<sp/>+<sp/>1)<sp/>%<sp/>3].x,<sp/>three_convex[(i<sp/>+<sp/>1)<sp/>%<sp/>3].y),<sp/>Scalar(0),<sp/>1);</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="521"><highlight class="normal"></highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;3Points&quot;</highlight><highlight class="normal">,<sp/>threePoints);</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/three_corners.jpg&quot;</highlight><highlight class="normal">,<sp/>threePoints);</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="525"><highlight class="normal"></highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Point2f&gt;<sp/>trLines;</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k1<sp/>=<sp/>-1.0<sp/>/<sp/>((three_convex[0].y<sp/>-<sp/>three_convex[1].y)<sp/>/<sp/>(three_convex[0].x<sp/>-<sp/>three_convex[1].x));</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>b1<sp/>=<sp/>0.5*(three_convex[0].y<sp/>+<sp/>three_convex[1].y)<sp/>-<sp/>k1*(0.5*(three_convex[0].x<sp/>+<sp/>three_convex[1].x));</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k2<sp/>=<sp/>-1.0<sp/>/<sp/>((three_convex[0].y<sp/>-<sp/>three_convex[2].y)<sp/>/<sp/>(three_convex[0].x<sp/>-<sp/>three_convex[2].x));</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>b2<sp/>=<sp/>0.5*(three_convex[0].y<sp/>+<sp/>three_convex[2].y)<sp/>-<sp/>k2*(0.5*(three_convex[0].x<sp/>+<sp/>three_convex[2].x));</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k3<sp/>=<sp/>-1.0<sp/>/<sp/>((three_convex[1].y<sp/>-<sp/>three_convex[2].y)<sp/>/<sp/>(three_convex[1].x<sp/>-<sp/>three_convex[2].x));</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>b3<sp/>=<sp/>0.5*(three_convex[1].y<sp/>+<sp/>three_convex[2].y)<sp/>-<sp/>k3*(0.5*(three_convex[1].x<sp/>+<sp/>three_convex[2].x));</highlight></codeline>
<codeline lineno="533"><highlight class="normal"></highlight></codeline>
<codeline lineno="534"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross1_x<sp/>=<sp/>(b2<sp/>-<sp/>b1)<sp/>/<sp/>(k1<sp/>-<sp/>k2);</highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross1_y<sp/>=<sp/>k1<sp/>*<sp/>cross1_x<sp/>+<sp/>b1;</highlight></codeline>
<codeline lineno="536"><highlight class="normal"></highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross2_x<sp/>=<sp/>(b3<sp/>-<sp/>b1)<sp/>/<sp/>(k1<sp/>-<sp/>k3);</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross2_y<sp/>=<sp/>k1<sp/>*<sp/>cross2_x<sp/>+<sp/>b1;</highlight></codeline>
<codeline lineno="539"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cross2_x<sp/>=<sp/>0.5*(three_convex[1].x<sp/>+<sp/>three_convex[2].x);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cross2_y<sp/>=<sp/>k1<sp/>*<sp/>cross2_x<sp/>+<sp/>b1;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="541"><highlight class="normal"></highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross3_x<sp/>=<sp/>(b2<sp/>-<sp/>b3)<sp/>/<sp/>(k3<sp/>-<sp/>k2);</highlight></codeline>
<codeline lineno="543"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross3_y<sp/>=<sp/>k2<sp/>*<sp/>cross3_x<sp/>+<sp/>b2;</highlight></codeline>
<codeline lineno="544"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cross3_x<sp/>=<sp/>0.5*(three_convex[1].x<sp/>+<sp/>three_convex[2].x);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="545"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cross3_y<sp/>=<sp/>k2*cross2_x<sp/>+<sp/>b2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"></highlight></codeline>
<codeline lineno="547"><highlight class="normal"><sp/><sp/><sp/><sp/>trLines.push_back(Point2f(cross1_x,<sp/>cross1_y));</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/>trLines.push_back(Point2f(cross2_x,<sp/>cross2_y));</highlight></codeline>
<codeline lineno="549"><highlight class="normal"><sp/><sp/><sp/><sp/>trLines.push_back(Point2f(cross3_x,<sp/>cross3_y));</highlight></codeline>
<codeline lineno="550"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>centX<sp/>=<sp/>(cross1_x<sp/>+<sp/>cross2_x<sp/>+<sp/>cross3_x)<sp/>/<sp/>3.0;</highlight></codeline>
<codeline lineno="551"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>centY<sp/>=<sp/>(cross1_y<sp/>+<sp/>cross2_y<sp/>+<sp/>cross3_y)<sp/>/<sp/>3.0;</highlight></codeline>
<codeline lineno="552"><highlight class="normal"></highlight></codeline>
<codeline lineno="553"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>err<sp/>=<sp/>sqrt((centX<sp/>-<sp/>center.x)*(centX<sp/>-<sp/>center.x)<sp/>+<sp/>(centY<sp/>-<sp/>center.y)*(centY<sp/>-<sp/>center.y));</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>edgeLen<sp/>=<sp/>sqrt((three_convex[0].x<sp/>-<sp/>three_convex[1].x)*(three_convex[0].x<sp/>-<sp/>three_convex[1].x)<sp/></highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>(three_convex[0].y<sp/>-<sp/>three_convex[1].y)*(three_convex[0].y<sp/>-<sp/>three_convex[1].y));</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/>cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;the<sp/>distance<sp/>between<sp/>circle<sp/>center<sp/>and<sp/>hexagon<sp/>center<sp/>is<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>err<sp/>&lt;&lt;<sp/>endl;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/>cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;hexagon<sp/>edge<sp/>length<sp/>is<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>edgeLen<sp/>&lt;&lt;<sp/>endl;</highlight></codeline>
<codeline lineno="558"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>err_r<sp/>=<sp/>err<sp/>/<sp/>edgeLen;</highlight></codeline>
<codeline lineno="559"><highlight class="normal"><sp/><sp/><sp/><sp/>cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;the<sp/>relative<sp/>error<sp/>is<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>err_r<sp/>&lt;&lt;<sp/>endl;</highlight></codeline>
<codeline lineno="560"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//circle(threePoints,<sp/>Point(cross1_x,<sp/>cross1_y),<sp/>1,<sp/>Scalar(0),<sp/>1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="561"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//circle(threePoints,<sp/>Point(cross2_x,<sp/>cross2_y),<sp/>1,<sp/>Scalar(0),<sp/>1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="562"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//circle(threePoints,<sp/>Point(cross3_x,<sp/>cross3_y),<sp/>1,<sp/>Scalar(0),<sp/>1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/>line(threePoints,<sp/>Point(cross2_x,<sp/>centY<sp/>-<sp/>80),<sp/>Point(cross2_x,<sp/>centY<sp/>+<sp/>50),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/>line(threePoints,<sp/>Point(centX<sp/>-<sp/>50,<sp/>k1*(centX-50)+b1),<sp/>Point(centX<sp/>+<sp/>50,<sp/>k1*(centX<sp/>+<sp/>50)<sp/>+<sp/>b1),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/>line(threePoints,<sp/>Point(centX<sp/>-<sp/>50,<sp/>k2*(centX<sp/>-<sp/>50)<sp/>+<sp/>b2),<sp/>Point(centX<sp/>+<sp/>50,<sp/>k2*(centX<sp/>+<sp/>50)<sp/>+<sp/>b2),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/>circle(threePoints,<sp/>Point(centX,<sp/>centY),<sp/>2,<sp/>Scalar(255),<sp/>-1);</highlight></codeline>
<codeline lineno="567"><highlight class="normal"></highlight></codeline>
<codeline lineno="568"><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//namedWindow(&quot;finalCenter&quot;,<sp/>0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;finalCenter&quot;</highlight><highlight class="normal">,<sp/>threePoints);</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/finalCenter.jpg&quot;</highlight><highlight class="normal">,<sp/>threePoints);</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>lm2<sp/>=<sp/>NonCrf_fastener(lm1,<sp/>2,<sp/>0.1,<sp/>0.2);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//foo();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="576"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//NonCRF(lmImg,<sp/>gtImg1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//GA(srcImg2,<sp/>srcImg2,<sp/>gtImg2,<sp/>gtImg2);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="578"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//time_t<sp/>tic,<sp/>toc;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//time(&amp;tic);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="580"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//NonCRF(srcImg,<sp/>gtImg);</highlight></codeline>
<codeline lineno="582"><highlight class="comment"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//time(&amp;toc);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cout<sp/>&lt;&lt;<sp/>(toc<sp/>-<sp/>tic)<sp/>&lt;&lt;<sp/>endl;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="585"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//system(&quot;pause&quot;);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="587"><highlight class="normal">}</highlight></codeline>
<codeline lineno="588"><highlight class="normal"></highlight></codeline>
<codeline lineno="589" refid="main_8cpp_1aa838e06497de10df7b1f0af2ea50d37d" refkind="member"><highlight class="normal">Mat<sp/><ref refid="main_8cpp_1aa838e06497de10df7b1f0af2ea50d37d" kindref="member">syntheticFastener</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>c,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>radius,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>radius_hex)</highlight></codeline>
<codeline lineno="590"><highlight class="normal">{</highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>fastener(500,<sp/>500,<sp/>CV_8U,<sp/>Scalar(255));</highlight></codeline>
<codeline lineno="592"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>centx<sp/>=<sp/>250;</highlight></codeline>
<codeline lineno="593"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>centy<sp/>=<sp/>250;</highlight></codeline>
<codeline lineno="594"><highlight class="normal"><sp/><sp/><sp/><sp/>circle(fastener,<sp/>Point(centx,<sp/>centy),<sp/>radius,<sp/>Scalar(100),<sp/>-1);</highlight></codeline>
<codeline lineno="595"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="596"><highlight class="normal"><sp/><sp/><sp/><sp/>Point<sp/>hex[6];</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>rad<sp/>=<sp/>60.0<sp/>/<sp/>180.0<sp/>*<sp/>CV_PI;</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dx<sp/>=<sp/>radius_hex<sp/>*<sp/>cos(rad);</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dy<sp/>=<sp/>radius_hex<sp/>*<sp/>sin(rad);</highlight></codeline>
<codeline lineno="600"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[0].x<sp/>=<sp/>centx<sp/>+<sp/>dx;</highlight></codeline>
<codeline lineno="601"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[0].y<sp/>=<sp/>centy<sp/>-<sp/>dy;</highlight></codeline>
<codeline lineno="602"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[1].x<sp/>=<sp/>centx<sp/>-<sp/>dx;</highlight></codeline>
<codeline lineno="603"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[1].y<sp/>=<sp/>centy<sp/>-<sp/>dy;</highlight></codeline>
<codeline lineno="604"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[2].x<sp/>=<sp/>centx<sp/>-<sp/>radius_hex;</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[2].y<sp/>=<sp/>centy;</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[3].x<sp/>=<sp/>centx<sp/>-<sp/>dx;</highlight></codeline>
<codeline lineno="607"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[3].y<sp/>=<sp/>centy<sp/>+<sp/>dy;</highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[4].x<sp/>=<sp/>centx<sp/>+<sp/>dx;</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[4].y<sp/>=<sp/>centy<sp/>+<sp/>dy;</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[5].x<sp/>=<sp/>centx<sp/>+<sp/>radius_hex;</highlight></codeline>
<codeline lineno="611"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[5].y<sp/>=<sp/>centy;</highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*for<sp/>(int<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>5;<sp/>i++)</highlight></codeline>
<codeline lineno="613"><highlight class="comment"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="614"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(fastener,<sp/>hex[i],<sp/>hex[i<sp/>+<sp/>1],<sp/>Scalar(255));</highlight></codeline>
<codeline lineno="615"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="616"><highlight class="comment"><sp/><sp/><sp/><sp/>line(fastener,<sp/>hex[5],<sp/>hex[0],<sp/>Scalar(255));*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"><sp/><sp/><sp/><sp/>fillConvexPoly(fastener,<sp/>hex,<sp/>6,<sp/>Scalar(200));</highlight></codeline>
<codeline lineno="618"><highlight class="normal"><sp/><sp/><sp/><sp/>fastener.forEach&lt;uchar&gt;([c](uchar&amp;<sp/>p,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>pos)</highlight></codeline>
<codeline lineno="619"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>rd<sp/>=<sp/>rand()<sp/>%<sp/>1000<sp/>*<sp/>0.001;<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rd<sp/>&lt;<sp/>c)<sp/>p<sp/>=<sp/>rand()<sp/>%<sp/>255;<sp/>});</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>fastener;</highlight></codeline>
<codeline lineno="621"><highlight class="normal">}</highlight></codeline>
<codeline lineno="622" refid="main_8cpp_1aeb7612962d1fbf5c7be9902e48ffdc3a" refkind="member"><highlight class="normal">Mat<sp/><ref refid="main_8cpp_1aeb7612962d1fbf5c7be9902e48ffdc3a" kindref="member">syntheticFastenerContour</ref>(</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>c,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>radius,<sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>radius_hex)</highlight></codeline>
<codeline lineno="623"><highlight class="normal">{</highlight></codeline>
<codeline lineno="624"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>fastener(500,<sp/>500,<sp/>CV_8U,<sp/>Scalar(255));</highlight></codeline>
<codeline lineno="625"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>centx<sp/>=<sp/>250;</highlight></codeline>
<codeline lineno="626"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>centy<sp/>=<sp/>250;</highlight></codeline>
<codeline lineno="627"><highlight class="normal"><sp/><sp/><sp/><sp/>circle(fastener,<sp/>Point(centx,<sp/>centy),<sp/>radius,<sp/>Scalar(100),<sp/>1);</highlight></codeline>
<codeline lineno="628"><highlight class="normal"></highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/><sp/><sp/>Point<sp/>hex[6];</highlight></codeline>
<codeline lineno="630"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>rad<sp/>=<sp/>60.0<sp/>/<sp/>180.0<sp/>*<sp/>CV_PI;</highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dx<sp/>=<sp/>radius_hex<sp/>*<sp/>cos(rad);</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dy<sp/>=<sp/>radius_hex<sp/>*<sp/>sin(rad);</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[0].x<sp/>=<sp/>centx<sp/>+<sp/>dx;</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[0].y<sp/>=<sp/>centy<sp/>-<sp/>dy;</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[1].x<sp/>=<sp/>centx<sp/>-<sp/>dx;</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[1].y<sp/>=<sp/>centy<sp/>-<sp/>dy;</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[2].x<sp/>=<sp/>centx<sp/>-<sp/>radius_hex;</highlight></codeline>
<codeline lineno="638"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[2].y<sp/>=<sp/>centy;</highlight></codeline>
<codeline lineno="639"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[3].x<sp/>=<sp/>centx<sp/>-<sp/>dx;</highlight></codeline>
<codeline lineno="640"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[3].y<sp/>=<sp/>centy<sp/>+<sp/>dy;</highlight></codeline>
<codeline lineno="641"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[4].x<sp/>=<sp/>centx<sp/>+<sp/>dx;</highlight></codeline>
<codeline lineno="642"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[4].y<sp/>=<sp/>centy<sp/>+<sp/>dy;</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[5].x<sp/>=<sp/>centx<sp/>+<sp/>radius_hex;</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/>hex[5].y<sp/>=<sp/>centy;</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>5;<sp/>i++)</highlight></codeline>
<codeline lineno="646"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="647"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(fastener,<sp/>hex[i],<sp/>hex[i<sp/>+<sp/>1],<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="648"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="649"><highlight class="normal"><sp/><sp/><sp/><sp/>line(fastener,<sp/>hex[5],<sp/>hex[0],<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="650"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//fillConvexPoly(fastener,<sp/>hex,<sp/>6,<sp/>Scalar(200));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/>fastener.forEach&lt;uchar&gt;([c](uchar&amp;<sp/>p,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>pos)</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>rd<sp/>=<sp/>rand()<sp/>%<sp/>1000<sp/>*<sp/>0.001;<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rd<sp/>&lt;<sp/>c)<sp/>p<sp/>=<sp/>rand()<sp/>%<sp/>255;<sp/>});</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>fastener;</highlight></codeline>
<codeline lineno="654"><highlight class="normal">}</highlight></codeline>
<codeline lineno="655" refid="main_8cpp_1a671cfb0ff1d0b10bc6877d1d9e46b91f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="main_8cpp_1a671cfb0ff1d0b10bc6877d1d9e46b91f" kindref="member">MHL</ref>(Mat<sp/>cntImg,<sp/>Mat<sp/>srcImg)</highlight></codeline>
<codeline lineno="656"><highlight class="normal">{</highlight></codeline>
<codeline lineno="657"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>0</highlight></codeline>
<codeline lineno="658"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//------LSD<sp/>line<sp/>segment<sp/>detector</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/>lm1.convertTo(lm1,<sp/>CV_8U,<sp/>255);</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/>Ptr&lt;LineSegmentDetector&gt;<sp/>ls<sp/>=<sp/>createLineSegmentDetector(LSD_REFINE_STD);</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Ptr&lt;LineSegmentDetector&gt;<sp/>ls<sp/>=<sp/>createLineSegmentDetector(LSD_REFINE_NONE);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="662"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4f&gt;<sp/>lines_std;</highlight></codeline>
<codeline lineno="663"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Detect<sp/>the<sp/>lines</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"><sp/><sp/><sp/><sp/>ls-&gt;detect(lm1,<sp/>lines_std);</highlight></codeline>
<codeline lineno="665"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;float&gt;<sp/>lines_len;</highlight></codeline>
<codeline lineno="666"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>i<sp/>:<sp/>lines_std)</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines_len.push_back((i[0]<sp/>-<sp/>i[2])*(i[0]<sp/>-<sp/>i[2])<sp/>+<sp/>(i[1]<sp/>-<sp/>i[3])*(i[1]<sp/>-<sp/>i[3]));</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/><sp/><sp/>sort(lines_len.begin(),<sp/>lines_len.end());</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>mantain_rate<sp/>=<sp/>0.35;</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4f&gt;<sp/>lines_new;</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>i<sp/>:<sp/>lines_std)</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="673"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(((i[0]<sp/>-<sp/>i[2])*(i[0]<sp/>-<sp/>i[2])<sp/>+<sp/>(i[1]<sp/>-<sp/>i[3])*(i[1]<sp/>-<sp/>i[3]))<sp/>&gt;<sp/>lines_len.at(lines_len.size()<sp/>*<sp/>(1<sp/>-<sp/>mantain_rate)))</highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines_new.push_back(i);</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="676"><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>drawnLines(lm1);</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/><sp/><sp/>ls-&gt;drawSegments(drawnLines,<sp/>lines_new);</highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;Standard<sp/>refinement&quot;</highlight><highlight class="normal">,<sp/>drawnLines);</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey(0);</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------find<sp/>hexagon<sp/>by<sp/>angle<sp/>difference</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------if<sp/>a<sp/>segment<sp/>is<sp/>of<sp/>hexagon,<sp/>the<sp/>different<sp/>of<sp/>angle<sp/>to<sp/>other<sp/>edges<sp/>is<sp/>0,<sp/>60,<sp/>120</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;float&gt;<sp/>lines_k;</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>i<sp/>:<sp/>lines_new)</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>slope<sp/>=<sp/>atan((i[1]<sp/>-<sp/>i[3])<sp/>/<sp/>(i[0]<sp/>-<sp/>i[2]));</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines_k.push_back(slope);</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4f&gt;<sp/>hexagon;</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>T<sp/>=<sp/>5.0<sp/>/<sp/>180.0<sp/>*<sp/>CV_PI;</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>lines_new.size();<sp/>i++)</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>cnt<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="694"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>lines_new.size();<sp/>j++)</highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(j<sp/>==<sp/>i)<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(abs(abs(lines_k[i]<sp/>-<sp/>lines_k[j]<sp/>-<sp/>1.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0))<sp/>&lt;<sp/>T</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>abs(abs(lines_k[i]<sp/>-<sp/>lines_k[j]<sp/>-<sp/>2.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0))<sp/>&lt;<sp/>T)</highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cnt++;</highlight></codeline>
<codeline lineno="701"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="702"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="703"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>len<sp/>=<sp/>sqrt((lines_new[i][0]<sp/>-<sp/>lines_new[i][2])*(lines_new[i][0]<sp/>-<sp/>lines_new[i][2])<sp/>+<sp/>(lines_new[i][1]<sp/>-<sp/>lines_new[i][3])*(lines_new[i][1]<sp/>-<sp/>lines_new[i][3]));</highlight></codeline>
<codeline lineno="704"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cnt<sp/>&gt;=<sp/>3)</highlight></codeline>
<codeline lineno="705"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hexagon.push_back(lines_new[i]);</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="707"><highlight class="normal"></highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>drawnLines2(lm1);</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/><sp/><sp/>ls-&gt;drawSegments(drawnLines2,<sp/>hexagon);</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/><sp/><sp/>namedWindow(</highlight><highlight class="stringliteral">&quot;Standard&quot;</highlight><highlight class="normal">,<sp/>0);</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;Standard&quot;</highlight><highlight class="normal">,<sp/>drawnLines2);</highlight></codeline>
<codeline lineno="712"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey(0);</highlight></codeline>
<codeline lineno="713"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight></codeline>
<codeline lineno="714"><highlight class="preprocessor"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//---------HoughLine<sp/>detector</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="715"><highlight class="normal"><sp/><sp/><sp/><sp/>cntImg.convertTo(cntImg,<sp/>CV_8U,<sp/>255);</highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/ncrf_0.jpg&quot;</highlight><highlight class="normal">,<sp/>cntImg);;</highlight></codeline>
<codeline lineno="717"><highlight class="normal"></highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//lm1.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/>const<sp/>int*<sp/>pos)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>-&gt;void<sp/>{if<sp/>(p<sp/>==<sp/>0)<sp/>p<sp/>=<sp/>255;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>else<sp/>p<sp/>=<sp/>0;<sp/>});</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>dst_lines(cntImg.size(),<sp/>CV_8UC3);</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec3f&gt;<sp/>circles2;</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/><sp/><sp/>HoughCircles(cntImg,<sp/>circles2,<sp/>HOUGH_GRADIENT,</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>1,<sp/>cntImg.rows<sp/>/<sp/>4,<sp/>60,<sp/>10,<sp/>55,<sp/>60);</highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/>Point<sp/>center0(cvRound(circles2[0][0]),<sp/>cvRound(circles2[0][1]));</highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius0<sp/>=<sp/>cvRound(circles2[0][2]);</highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>min((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)circles2.size(),<sp/>1);<sp/>i++)</highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles2[i][0]),<sp/>cvRound(circles2[i][1]));</highlight></codeline>
<codeline lineno="731"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles2[i][2]);</highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(cntImg,<sp/>center,<sp/>3,<sp/>Scalar(0),<sp/>-1,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>outline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(cntImg,<sp/>center,<sp/>radius,<sp/>Scalar(0),<sp/>3,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="737"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;hough<sp/>circle2&quot;</highlight><highlight class="normal">,<sp/>cntImg);</highlight></codeline>
<codeline lineno="738"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/ncrfcircle_0.jpg&quot;</highlight><highlight class="normal">,<sp/>cntImg);;</highlight></codeline>
<codeline lineno="739"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="740"><highlight class="normal"></highlight></codeline>
<codeline lineno="741"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/>cntImg.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>pos)</highlight></codeline>
<codeline lineno="743"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p<sp/>&gt;<sp/>0)p<sp/>=<sp/>0;<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>p<sp/>=<sp/>255;<sp/>});</highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4i&gt;<sp/>lines;</highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/>HoughLinesP(cntImg,<sp/>lines,<sp/>1,<sp/>5<sp/>*<sp/>CV_PI<sp/>/<sp/>180,<sp/>20,<sp/>10,<sp/>5);</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//for<sp/>(size_t<sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>lines.size();<sp/>i++)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//{</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="748"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/>line(dst_lines,<sp/>Point(lines[i][0],<sp/>lines[i][1]),</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>Point(lines[i][2],<sp/>lines[i][3]),<sp/>Scalar(0,<sp/>0,<sp/>255),<sp/>1,<sp/>8);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="750"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//}</highlight></codeline>
<codeline lineno="752"><highlight class="comment"></highlight><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//imshow(&quot;houghLine&quot;,<sp/>dst_lines);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//waitKey();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="754"><highlight class="normal"></highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------find<sp/>hexagon<sp/>by<sp/>angle<sp/>difference</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//----------if<sp/>a<sp/>segment<sp/>is<sp/>of<sp/>hexagon,<sp/>the<sp/>different<sp/>of<sp/>angle<sp/>to<sp/>other<sp/>edges<sp/>is<sp/>0,<sp/>60,<sp/>120</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>hexMat(cntImg.size(),<sp/>CV_8U,<sp/>Scalar(255));</highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;float&gt;<sp/>lines_k;</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>i<sp/>:<sp/>lines)</highlight></codeline>
<codeline lineno="760"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>slope<sp/>=<sp/>atan((i[1]<sp/>-<sp/>i[3])<sp/>*<sp/>1.0<sp/>/<sp/>(i[0]<sp/>-<sp/>i[2]));</highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lines_k.push_back(slope);</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Vec4f&gt;<sp/>hexagon;</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>T<sp/>=<sp/>15.0<sp/>/<sp/>180.0<sp/>*<sp/>CV_PI;</highlight></codeline>
<codeline lineno="766"><highlight class="normal"><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles2[0][0]),<sp/>cvRound(circles2[0][1]));</highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles2[0][2]);</highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>lines.size();<sp/>i++)</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>cnt<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>lines.size();<sp/>j++)</highlight></codeline>
<codeline lineno="772"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(j<sp/>==<sp/>i)<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="774"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(abs(abs(abs(lines_k[i])<sp/>-<sp/>abs(lines_k[j]))<sp/>-<sp/>1.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0)<sp/>&lt;<sp/>T</highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>abs(abs(abs(lines_k[i])<sp/>-<sp/>abs(lines_k[j]))<sp/>-<sp/>2.0<sp/>*<sp/>CV_PI<sp/>/<sp/>3.0)<sp/>&lt;<sp/>T)</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cnt++;</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cnt<sp/>&gt;=<sp/>2)</highlight><highlight class="comment">//<sp/>&amp;&amp;<sp/>len<sp/>&lt;<sp/>100)//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sqrt((lines[i][0]<sp/>-<sp/>center.x)*(lines[i][0]<sp/>-<sp/>center.x)<sp/>+<sp/>(lines[i][1]<sp/>-<sp/>center.y)*(lines[i][1]<sp/>-<sp/>center.y))<sp/>&gt;=<sp/>radius<sp/>-<sp/>5</highlight></codeline>
<codeline lineno="783"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>sqrt((lines[i][0]<sp/>-<sp/>center.x)*(lines[i][0]<sp/>-<sp/>center.x)<sp/>+<sp/>(lines[i][1]<sp/>-<sp/>center.y)*(lines[i][1]<sp/>-<sp/>center.y))<sp/>&lt;<sp/>radius*2.0<sp/>/<sp/>3.0</highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>sqrt((lines[i][2]<sp/>-<sp/>center.x)*(lines[i][2]<sp/>-<sp/>center.x)<sp/>+<sp/>(lines[i][3]<sp/>-<sp/>center.y)*(lines[i][3]<sp/>-<sp/>center.y))<sp/>&gt;=<sp/>radius<sp/>-<sp/>5</highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>sqrt((lines[i][2]<sp/>-<sp/>center.x)*(lines[i][2]<sp/>-<sp/>center.x)<sp/>+<sp/>(lines[i][3]<sp/>-<sp/>center.y)*(lines[i][3]<sp/>-<sp/>center.y))<sp/>&lt;<sp/>radius*2.0<sp/>/<sp/>3.0)</highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hexagon.push_back(lines[i]);</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(hexMat,<sp/>Point2f(lines[i][0],<sp/>lines[i][1]),<sp/>Point2f(lines[i][2],<sp/>lines[i][3]),<sp/>Scalar(0));</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="792"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>min((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)circles2.size(),<sp/>1);<sp/>i++)</highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="794"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles2[i][0]),<sp/>cvRound(circles2[i][1]));</highlight></codeline>
<codeline lineno="795"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles2[i][2]);</highlight></codeline>
<codeline lineno="796"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="797"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(hexMat,<sp/>center,<sp/>2,<sp/>Scalar(0),<sp/>-1,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>outline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="799"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(hexMat,<sp/>center,<sp/>radius,<sp/>Scalar(0),<sp/>2,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="801"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;Standard&quot;</highlight><highlight class="normal">,<sp/>hexMat);</highlight></codeline>
<codeline lineno="802"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey(0);</highlight></codeline>
<codeline lineno="803"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/circleHex.jpg&quot;</highlight><highlight class="normal">,<sp/>hexMat);</highlight></codeline>
<codeline lineno="804"><highlight class="normal"></highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>drawcorner(hexMat.size(),<sp/>hexMat.type(),<sp/>Scalar(0,<sp/>0,<sp/>0));</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>drawcorner<sp/>=<sp/>hexMat.clone();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/>cntImg.forEach&lt;uchar&gt;([](uchar&amp;<sp/>p,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>pos)</highlight></codeline>
<codeline lineno="808"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>-&gt;</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>{</highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(p<sp/>&gt;<sp/>0)p<sp/>=<sp/>0;<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>p<sp/>=<sp/>255;<sp/>});</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/>drawcorner<sp/>=<sp/>srcImg.clone();</highlight></codeline>
<codeline lineno="810"><highlight class="normal"></highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>min((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)circles2.size(),<sp/>1);<sp/>i++)</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Point<sp/>center(cvRound(circles2[i][0]),<sp/>cvRound(circles2[i][1]));</highlight></codeline>
<codeline lineno="814"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>radius<sp/>=<sp/>cvRound(circles2[i][2]);</highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>center</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(drawcorner,<sp/>center,<sp/>2,<sp/>Scalar(0),<sp/>-1,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>draw<sp/>the<sp/>circle<sp/>outline</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(drawcorner,<sp/>center,<sp/>radius,<sp/>Scalar(0),<sp/>2,<sp/>8,<sp/>0);</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//------------------------</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Point2f&gt;<sp/>hex_corners;</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>hexagon.size();<sp/>i++)</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>slope1<sp/>=<sp/>atan((hexagon[i][1]<sp/>-<sp/>hexagon[i][3])<sp/>*<sp/>1.0<sp/>/<sp/>(hexagon[i][0]<sp/>-<sp/>hexagon[i][2]));</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>hexagon.size();<sp/>j++)</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(j<sp/>==<sp/>i)<sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//line(drawcorner,<sp/>Point(hexagon[i][0],<sp/>hexagon[i][1]),<sp/>Point(hexagon[i][2],<sp/>hexagon[i][3]),<sp/>Scalar(0,<sp/>255,<sp/>0));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(drawcorner,<sp/>Point(hexagon[j][0],<sp/>hexagon[j][1]),<sp/>Point(hexagon[j][2],<sp/>hexagon[j][3]),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k1,<sp/>k2,<sp/>b1,<sp/>b2;</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>k1<sp/>=<sp/>(hexagon[i][1]<sp/>-<sp/>hexagon[i][3])<sp/>*<sp/>1.0<sp/>/<sp/>(hexagon[i][0]<sp/>-<sp/>hexagon[i][2]);</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>k2<sp/>=<sp/>(hexagon[j][1]<sp/>-<sp/>hexagon[j][3])<sp/>*<sp/>1.0<sp/>/<sp/>(hexagon[j][0]<sp/>-<sp/>hexagon[j][2]);</highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b1<sp/>=<sp/>hexagon[i][1]<sp/>-<sp/>k1<sp/>*<sp/>hexagon[i][0];</highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>b2<sp/>=<sp/>hexagon[j][1]<sp/>-<sp/>k2<sp/>*<sp/>hexagon[j][0];</highlight></codeline>
<codeline lineno="835"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross_x<sp/>=<sp/>(b2<sp/>-<sp/>b1)<sp/>/<sp/>(k1<sp/>-<sp/>k2);</highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross_y<sp/>=<sp/>k2<sp/>*<sp/>cross_x<sp/>+<sp/>b2;</highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//hex_corners.insert(segdist,<sp/>Point2f(cross_x,<sp/>cross_y));</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(sqrt((cross_x<sp/>-<sp/>center.x)*(cross_x<sp/>-<sp/>center.x)<sp/>+<sp/>(cross_y<sp/>-<sp/>center.y)*(cross_y<sp/>-<sp/>center.y))<sp/>&lt;<sp/>radius<sp/>-<sp/>5</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>sqrt((cross_x<sp/>-<sp/>center.x)*(cross_x<sp/>-<sp/>center.x)<sp/>+<sp/>(cross_y<sp/>-<sp/>center.y)*(cross_y<sp/>-<sp/>center.y))<sp/>&gt;<sp/>radius*3.22<sp/>/<sp/>4.0)</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hex_corners.push_back(Point2f(cross_x,<sp/>cross_y));</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="843"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//Mat<sp/>finalRst<sp/>=<sp/>drawcorner.clone();</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="846"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>it<sp/>=<sp/>hex_corners.begin();<sp/>it<sp/>!=<sp/>hex_corners.end();<sp/>++it)</highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(drawcorner,<sp/>Point(it-&gt;x,<sp/>it-&gt;y),<sp/>3,<sp/>Scalar(255),<sp/>1);</highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;hex_corner&quot;</highlight><highlight class="normal">,<sp/>drawcorner);</highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/hexcorner.jpg&quot;</highlight><highlight class="normal">,<sp/>drawcorner);</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="853"><highlight class="normal"></highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//-----------------distance<sp/>constrain<sp/>to<sp/>pick<sp/>out<sp/>3<sp/>convex<sp/>points</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>len<sp/>=<sp/>20.0;</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>st_dst[3]<sp/>=<sp/>{<sp/>len,<sp/>1.732*len,<sp/>2.0*len<sp/>};</highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dist_T<sp/>=<sp/>3;</highlight></codeline>
<codeline lineno="858"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Point2f&gt;<sp/>hexVec;</highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">auto</highlight><highlight class="normal"><sp/>it<sp/>=<sp/>hex_corners.begin();<sp/>it<sp/>!=<sp/>hex_corners.end();<sp/>++it)</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hexVec.push_back(Point2f(it-&gt;x,<sp/>it-&gt;y));</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;int&gt;<sp/>votes(hexVec.size(),<sp/>0);</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>hexVec.size();<sp/>i++)</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="866"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>hexVec.size();<sp/>j++)</highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(i<sp/>!=<sp/>j)</highlight></codeline>
<codeline lineno="869"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="870"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>dist<sp/>=<sp/>sqrt((hexVec[i].x<sp/>-<sp/>hexVec[j].x)*(hexVec[i].x<sp/>-<sp/>hexVec[j].x)<sp/>+<sp/>(hexVec[i].y<sp/>-<sp/>hexVec[j].y)*(hexVec[i].y<sp/>-<sp/>hexVec[j].y));</highlight></codeline>
<codeline lineno="871"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(abs(dist<sp/>-<sp/>st_dst[0])<sp/>&lt;<sp/>dist_T<sp/>||<sp/>abs(dist<sp/>-<sp/>st_dst[1])<sp/>&lt;<sp/>dist_T<sp/>||<sp/>abs(dist<sp/>-<sp/>st_dst[2])<sp/>&lt;<sp/>dist_T)</highlight></codeline>
<codeline lineno="872"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="873"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>votes[j]++;</highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="876"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>convex_cnt<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>min_votes<sp/>=<sp/>100;</highlight></codeline>
<codeline lineno="879"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Point2f&gt;<sp/>three_convex;</highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(convex_cnt<sp/>&lt;<sp/>3<sp/>&amp;&amp;<sp/>votes.size()<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="882"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>min_index<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>votes.size();<sp/>i++)</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(votes[i]<sp/>&lt;<sp/>min_votes)</highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_votes<sp/>=<sp/>votes[i];</highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_index<sp/>=<sp/>i;</highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>votes[min_index]<sp/>=<sp/>200;</highlight></codeline>
<codeline lineno="892"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>three_convex.push_back(hexVec[min_index]);</highlight></codeline>
<codeline lineno="893"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>convex_cnt++;</highlight></codeline>
<codeline lineno="894"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>min_votes<sp/>=<sp/>100;</highlight></codeline>
<codeline lineno="895"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="896"><highlight class="normal"></highlight></codeline>
<codeline lineno="897"><highlight class="normal"><sp/><sp/><sp/><sp/>Mat<sp/>threePoints(drawcorner);</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>three_convex.size();<sp/>i++)</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="900"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>circle(threePoints,<sp/>Point(three_convex[i].x,<sp/>three_convex[i].y),<sp/>3,<sp/>Scalar(255),<sp/>1);</highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>line(threePoints,<sp/>Point(three_convex[i<sp/>%<sp/>3].x,<sp/>three_convex[i<sp/>%<sp/>3].y),<sp/>Point(three_convex[(i<sp/>+<sp/>1)<sp/>%<sp/>3].x,<sp/>three_convex[(i<sp/>+<sp/>1)<sp/>%<sp/>3].y),<sp/>Scalar(0),<sp/>1);</highlight></codeline>
<codeline lineno="902"><highlight class="normal"></highlight></codeline>
<codeline lineno="903"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="904"><highlight class="normal"></highlight></codeline>
<codeline lineno="905"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;3Points&quot;</highlight><highlight class="normal">,<sp/>threePoints);</highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/three_corners.jpg&quot;</highlight><highlight class="normal">,<sp/>threePoints);</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="908"><highlight class="normal"></highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/>vector&lt;Point2f&gt;<sp/>trLines;</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k1<sp/>=<sp/>-1.0<sp/>/<sp/>((three_convex[0].y<sp/>-<sp/>three_convex[1].y)<sp/>/<sp/>(three_convex[0].x<sp/>-<sp/>three_convex[1].x));</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>b1<sp/>=<sp/>0.5*(three_convex[0].y<sp/>+<sp/>three_convex[1].y)<sp/>-<sp/>k1*(0.5*(three_convex[0].x<sp/>+<sp/>three_convex[1].x));</highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k2<sp/>=<sp/>-1.0<sp/>/<sp/>((three_convex[0].y<sp/>-<sp/>three_convex[2].y)<sp/>/<sp/>(three_convex[0].x<sp/>-<sp/>three_convex[2].x));</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>b2<sp/>=<sp/>0.5*(three_convex[0].y<sp/>+<sp/>three_convex[2].y)<sp/>-<sp/>k2*(0.5*(three_convex[0].x<sp/>+<sp/>three_convex[2].x));</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>k3<sp/>=<sp/>-1.0<sp/>/<sp/>((three_convex[1].y<sp/>-<sp/>three_convex[2].y)<sp/>/<sp/>(three_convex[1].x<sp/>-<sp/>three_convex[2].x));</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>b3<sp/>=<sp/>0.5*(three_convex[1].y<sp/>+<sp/>three_convex[2].y)<sp/>-<sp/>k3*(0.5*(three_convex[1].x<sp/>+<sp/>three_convex[2].x));</highlight></codeline>
<codeline lineno="916"><highlight class="normal"></highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross1_x<sp/>=<sp/>(b2<sp/>-<sp/>b1)<sp/>/<sp/>(k1<sp/>-<sp/>k2);</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross1_y<sp/>=<sp/>k1<sp/>*<sp/>cross1_x<sp/>+<sp/>b1;</highlight></codeline>
<codeline lineno="919"><highlight class="normal"></highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross2_x<sp/>=<sp/>(b3<sp/>-<sp/>b1)<sp/>/<sp/>(k1<sp/>-<sp/>k3);</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross2_y<sp/>=<sp/>k1<sp/>*<sp/>cross2_x<sp/>+<sp/>b1;</highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cross2_x<sp/>=<sp/>0.5*(three_convex[1].x<sp/>+<sp/>three_convex[2].x);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cross2_y<sp/>=<sp/>k1<sp/>*<sp/>cross2_x<sp/>+<sp/>b1;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="924"><highlight class="normal"></highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross3_x<sp/>=<sp/>(b2<sp/>-<sp/>b3)<sp/>/<sp/>(k3<sp/>-<sp/>k2);</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>cross3_y<sp/>=<sp/>k2<sp/>*<sp/>cross3_x<sp/>+<sp/>b2;</highlight></codeline>
<codeline lineno="927"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cross3_x<sp/>=<sp/>0.5*(three_convex[1].x<sp/>+<sp/>three_convex[2].x);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//cross3_y<sp/>=<sp/>k2*cross2_x<sp/>+<sp/>b2;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="929"><highlight class="normal"></highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/>trLines.push_back(Point2f(cross1_x,<sp/>cross1_y));</highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/>trLines.push_back(Point2f(cross2_x,<sp/>cross2_y));</highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/><sp/>trLines.push_back(Point2f(cross3_x,<sp/>cross3_y));</highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>centX<sp/>=<sp/>(cross1_x<sp/>+<sp/>cross2_x<sp/>+<sp/>cross3_x)<sp/>/<sp/>3.0;</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>centY<sp/>=<sp/>(cross1_y<sp/>+<sp/>cross2_y<sp/>+<sp/>cross3_y)<sp/>/<sp/>3.0;</highlight></codeline>
<codeline lineno="935"><highlight class="normal"></highlight></codeline>
<codeline lineno="936"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>err<sp/>=<sp/>sqrt((centX<sp/>-<sp/>center.x)*(centX<sp/>-<sp/>center.x)<sp/>+<sp/>(centY<sp/>-<sp/>center.y)*(centY<sp/>-<sp/>center.y));</highlight></codeline>
<codeline lineno="937"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>edgeLen<sp/>=<sp/>sqrt((three_convex[0].x<sp/>-<sp/>three_convex[1].x)*(three_convex[0].x<sp/>-<sp/>three_convex[1].x)</highlight></codeline>
<codeline lineno="938"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>+<sp/>(three_convex[0].y<sp/>-<sp/>three_convex[1].y)*(three_convex[0].y<sp/>-<sp/>three_convex[1].y));</highlight></codeline>
<codeline lineno="939"><highlight class="normal"><sp/><sp/><sp/><sp/>cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;the<sp/>distance<sp/>between<sp/>circle<sp/>center<sp/>and<sp/>hexagon<sp/>center<sp/>is<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>err<sp/>&lt;&lt;<sp/>endl;</highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/>cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;hexagon<sp/>edge<sp/>length<sp/>is<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>edgeLen<sp/>&lt;&lt;<sp/>endl;</highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>err_r<sp/>=<sp/>err<sp/>/<sp/>edgeLen;</highlight></codeline>
<codeline lineno="942"><highlight class="normal"><sp/><sp/><sp/><sp/>cout<sp/>&lt;&lt;<sp/></highlight><highlight class="stringliteral">&quot;the<sp/>relative<sp/>error<sp/>is<sp/>&quot;</highlight><highlight class="normal"><sp/>&lt;&lt;<sp/>err_r<sp/>&lt;&lt;<sp/>endl;</highlight></codeline>
<codeline lineno="943"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//circle(threePoints,<sp/>Point(cross1_x,<sp/>cross1_y),<sp/>1,<sp/>Scalar(0),<sp/>1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="944"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//circle(threePoints,<sp/>Point(cross2_x,<sp/>cross2_y),<sp/>1,<sp/>Scalar(0),<sp/>1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="945"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//circle(threePoints,<sp/>Point(cross3_x,<sp/>cross3_y),<sp/>1,<sp/>Scalar(0),<sp/>1);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="946"><highlight class="normal"><sp/><sp/><sp/><sp/>line(threePoints,<sp/>Point(cross2_x,<sp/>centY<sp/>-<sp/>80),<sp/>Point(cross2_x,<sp/>centY<sp/>+<sp/>50),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/>line(threePoints,<sp/>Point(centX<sp/>-<sp/>50,<sp/>k1*(centX<sp/>-<sp/>50)<sp/>+<sp/>b1),<sp/>Point(centX<sp/>+<sp/>50,<sp/>k1*(centX<sp/>+<sp/>50)<sp/>+<sp/>b1),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/>line(threePoints,<sp/>Point(centX<sp/>-<sp/>50,<sp/>k2*(centX<sp/>-<sp/>50)<sp/>+<sp/>b2),<sp/>Point(centX<sp/>+<sp/>50,<sp/>k2*(centX<sp/>+<sp/>50)<sp/>+<sp/>b2),<sp/>Scalar(0));</highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/>circle(threePoints,<sp/>Point(centX,<sp/>centY),<sp/>2,<sp/>Scalar(255),<sp/>-1);</highlight></codeline>
<codeline lineno="950"><highlight class="normal"></highlight></codeline>
<codeline lineno="951"><highlight class="normal"></highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//namedWindow(&quot;finalCenter&quot;,<sp/>0);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/>imshow(</highlight><highlight class="stringliteral">&quot;finalCenter&quot;</highlight><highlight class="normal">,<sp/>threePoints);</highlight></codeline>
<codeline lineno="954"><highlight class="normal"><sp/><sp/><sp/><sp/>imwrite(</highlight><highlight class="stringliteral">&quot;pic/finalCenter.jpg&quot;</highlight><highlight class="normal">,<sp/>threePoints);</highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/>waitKey();</highlight></codeline>
<codeline lineno="956"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="C:/Users/pengzhyong/Desktop/CV/Code/GAcontour/GAcontour/main.cpp"/>
  </compounddef>
</doxygen>
